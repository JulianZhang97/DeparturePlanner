{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\src\\\\components\\\\ResultPage.js\";\nimport React, { Component } from 'react';\nimport ReactLoading from 'react-loading';\nimport Header from './Header.js';\nimport axios from 'axios';\n\nvar ResultPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ResultPage, _Component);\n\n  function ResultPage(props) {\n    var _this;\n\n    _classCallCheck(this, ResultPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ResultPage).call(this, props));\n    _this.state = {\n      departureSite: _this.props.location.state.departureSite,\n      arrivalSite: _this.props.location.state.arrivalSite,\n      airline: _this.props.location.state.airline,\n      flightNum: _this.props.location.state.flightNum,\n      flightDate: _this.props.location.state.flightDate,\n      departureDetailsLoaded: false,\n      departureTime: \"\",\n      departureTimeZone: \"\",\n      flightExists: null,\n      curTime: new Date()\n    };\n    _this.searchFlight = _this.searchFlight.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getDepartureDetails = _this.getDepartureDetails.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ResultPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.searchFlight();\n    }\n  }, {\n    key: \"searchFlight\",\n    value: function searchFlight() {\n      var flightSearchKey = process.env.REACT_APP_FLIGHT_API_KEY;\n      var proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n      var init = {\n        headers: {\n          \"Ocp-Apim-Subscription-Key\": flightSearchKey\n        },\n        params: {\n          \"Airline\": this.state.airline,\n          \"FlightNumber\": this.state.flightNum\n        }\n      };\n      var self = this;\n      axios.get(proxyurl + \"https://flightlookup.azure-api.net/v1/xml/TimeTable/\" + this.state.departureSite + \"/\" + this.state.arrivalSite + \"/\" + this.state.flightDate, init).then(function (response) {\n        // console.log(response.data);\n        self.getDepartureDetails(response.data);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"getDepartureDetails\",\n    value: function getDepartureDetails(flightData) {\n      var parser = new DOMParser();\n      var xmlDoc = parser.parseFromString(flightData, \"text/xml\");\n\n      if (!xmlDoc.getElementsByTagName(\"Success\").length === 0) {\n        console.log(\"Search Failed!\");\n        this.setState({\n          flightExists: false,\n          departureDetailsLoaded: true\n        });\n      } else {\n        var flightDepartureTime = xmlDoc.getElementsByTagName(\"FlightDetails\")[0].getAttribute(\"FLSDepartureDateTime\");\n        var flightDepartureTimeZone = xmlDoc.getElementsByTagName(\"FlightDetails\")[0].getAttribute(\"FLSDepartureTimeOffset\");\n        this.setState({\n          departureTime: flightDepartureTime,\n          departureTimeZone: flightDepartureTimeZone\n        });\n        this.setState({\n          flightExists: true,\n          departureDetailsLoaded: true\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), !this.state.departureDetailsLoaded && React.createElement(ReactLoading, {\n        type: \"spinningBubbles\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }), \";\", this.state.departureDetailsLoaded && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, !this.state.flightExists ? React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Flight Not Found!\") : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, this.state.departureSite), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, this.state.arrivalSite), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, this.state.airline), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, this.state.flightNum), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, this.state.departureTime), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, this.state.departureTimeZone))));\n    }\n  }]);\n\n  return ResultPage;\n}(Component);\n\nexport { ResultPage as default };","map":{"version":3,"sources":["C:\\Users\\zhang\\OneDrive\\Documents\\Personal Projects\\departure-planner\\react-backend\\client\\src\\components\\ResultPage.js"],"names":["React","Component","ReactLoading","Header","axios","ResultPage","props","state","departureSite","location","arrivalSite","airline","flightNum","flightDate","departureDetailsLoaded","departureTime","departureTimeZone","flightExists","curTime","Date","searchFlight","bind","getDepartureDetails","flightSearchKey","process","env","REACT_APP_FLIGHT_API_KEY","proxyurl","init","headers","params","self","get","then","response","data","catch","error","console","log","flightData","parser","DOMParser","xmlDoc","parseFromString","getElementsByTagName","length","setState","flightDepartureTime","getAttribute","flightDepartureTimeZone"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport ReactLoading from 'react-loading';\r\n\r\nimport Header from './Header.js';\r\n\r\nimport axios from 'axios'\r\n\r\nexport default class ResultPage extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      departureSite: this.props.location.state.departureSite,\r\n      arrivalSite: this.props.location.state.arrivalSite,\r\n      airline: this.props.location.state.airline,\r\n      flightNum: this.props.location.state.flightNum,\r\n      flightDate: this.props.location.state.flightDate,\r\n\r\n      departureDetailsLoaded: false,\r\n      departureTime: \"\",\r\n      departureTimeZone: \"\",\r\n      flightExists: null,\r\n      curTime: new Date(),\r\n    }\r\n\r\n    this.searchFlight = this.searchFlight.bind(this);\r\n    this.getDepartureDetails = this.getDepartureDetails.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n   this.searchFlight();\r\n  }\r\n\r\n  searchFlight(){\r\n    const flightSearchKey = process.env.REACT_APP_FLIGHT_API_KEY;\r\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\r\n    \r\n    const init = {\r\n      headers: {\r\n        \"Ocp-Apim-Subscription-Key\": flightSearchKey\r\n      },\r\n      params: {\r\n        \"Airline\": this.state.airline,\r\n        \"FlightNumber\": this.state.flightNum,\r\n      }\r\n    }\r\n\r\n    var self = this;\r\n\r\n    axios.get(proxyurl + \"https://flightlookup.azure-api.net/v1/xml/TimeTable/\" \r\n    + this.state.departureSite + \"/\" + this.state.arrivalSite + \"/\" \r\n    + this.state.flightDate, init)\r\n    .then(function (response) {\r\n      // console.log(response.data);\r\n      self.getDepartureDetails(response.data);      \r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n\r\n  }\r\n\r\n  getDepartureDetails(flightData){\r\n    var parser = new DOMParser();\r\n    var xmlDoc = parser.parseFromString(flightData,\"text/xml\");\r\n    \r\n   \r\n\r\n    if(!xmlDoc.getElementsByTagName(\"Success\").length === 0){\r\n      console.log(\"Search Failed!\");\r\n      this.setState({flightExists: false, departureDetailsLoaded: true});\r\n    }\r\n\r\n    else{\r\n      var flightDepartureTime = xmlDoc.getElementsByTagName(\"FlightDetails\")[0].getAttribute(\"FLSDepartureDateTime\");\r\n      var flightDepartureTimeZone = xmlDoc.getElementsByTagName(\"FlightDetails\")[0].getAttribute(\"FLSDepartureTimeOffset\");\r\n\r\n      this.setState({departureTime: flightDepartureTime, departureTimeZone: flightDepartureTimeZone});\r\n      this.setState({flightExists: true, departureDetailsLoaded: true});\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  render(){\r\n    return(\r\n      <div>\r\n          <Header>\r\n          </Header>\r\n          {!this.state.departureDetailsLoaded && <ReactLoading type={\"spinningBubbles\"}/>};\r\n          {this.state.departureDetailsLoaded && <div>\r\n            {!this.state.flightExists ? <h1>Flight Not Found!</h1> : \r\n\r\n            <div>\r\n              <p>{this.state.departureSite}</p>\r\n              <p>{this.state.arrivalSite}</p>\r\n              <p>{this.state.airline}</p>\r\n              <p>{this.state.flightNum}</p>\r\n              <p>{this.state.departureTime}</p>\r\n              <p>{this.state.departureTimeZone}</p>\r\n            </div>\r\n          }\r\n          </div>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}