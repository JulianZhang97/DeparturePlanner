{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\src\\\\components\\\\MainPage.js\";\nimport React, { Component } from 'react';\nimport { Button } from 'react-bootstrap';\nimport Autocomplete from 'react-autocomplete';\nimport axios from 'axios';\nimport Fade from 'react-reveal/Fade';\nimport AddressSearch from './AddressSearch.js';\nimport './Style.css';\nimport airlines from './Airlines.js';\nvar dateOptions = {\n  hour: 'numeric',\n  minute: 'numeric',\n  timeZoneName: 'short',\n  weekday: 'long',\n  year: 'numeric',\n  month: 'short',\n  day: 'numeric'\n};\n\nvar MainPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MainPage, _Component);\n\n  function MainPage(props) {\n    var _this;\n\n    _classCallCheck(this, MainPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MainPage).call(this, props));\n\n    _this.getStartAddress = function (address) {\n      _this.setState({\n        startAddress: address\n      });\n    };\n\n    _this.state = {\n      departureSiteBox: \"\",\n      departureSite: \"\",\n      siteList: [],\n      arrivalSiteBox: \"\",\n      arrivalSite: \"\",\n      airlineList: airlines.airlines,\n      filteredAirlineList: [],\n      airline: \"\",\n      airlineBox: \"\",\n      flightNum: \"\",\n      curDate: new Date(),\n      startAddress: \"\",\n      mapsAPI: \"\",\n      inputStatus: 0\n    };\n    _this.handleAirlineFieldChange = _this.handleAirlineFieldChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleAirlineSelect = _this.handleAirlineSelect.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDepartureFieldChange = _this.handleDepartureFieldChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDepartureSiteSelect = _this.handleDepartureSiteSelect.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.searchSites = _this.searchSites.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleArrivalFieldChange = _this.handleArrivalFieldChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleArrivalSiteSelect = _this.handleArrivalSiteSelect.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateFlightNum = _this.updateFlightNum.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleNextButton = _this.handleNextButton.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getStartAddress = _this.getStartAddress.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MainPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var apiKey = process.env.REACT_APP_GOOGLE_API_KEY;\n      this.setState({\n        mapsAPI: apiKey\n      });\n    }\n  }, {\n    key: \"handleNextButton\",\n    value: function handleNextButton() {\n      if (this.state.inputStatus < 2) {\n        var inputNum = this.state.inputStatus;\n        this.setState({\n          inputStatus: inputNum + 1\n        });\n        console.log(this.state);\n      }\n\n      if (this.state.inputStatus === 2) {\n        var flightDate = this.state.curDate.getFullYear() + \"\" + (\"0\" + (this.state.curDate.getMonth() + 1)).slice(-2) + \"\" + (\"0\" + this.state.curDate.getDate()).slice(-2);\n        this.props.history.push({\n          pathname: '/result',\n          state: {\n            departureSite: this.state.departureSite,\n            flightDate: flightDate,\n            arrivalSite: this.state.arrivalSite,\n            airline: this.state.airline,\n            flightNum: this.state.flightNum,\n            homeAddress: this.state.startAddress\n          }\n        });\n      }\n    }\n  }, {\n    key: \"searchSites\",\n    value: function searchSites(keyword) {\n      var airportKey = process.env.REACT_APP_AIRPORT_API_KEY;\n\n      if (keyword !== \"\") {\n        var init = {\n          params: {\n            apikey: airportKey,\n            term: keyword\n          }\n        };\n        var self = this;\n        axios.get(\"https://api.sandbox.amadeus.com/v1.2/airports/autocomplete\", init).then(function (response) {\n          self.setState({\n            siteList: response.data\n          });\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    }\n  }, {\n    key: \"updateFlightNum\",\n    value: function updateFlightNum(e) {\n      this.setState({\n        flightNum: e.target.value\n      });\n    }\n  }, {\n    key: \"handleAirlineFieldChange\",\n    value: function handleAirlineFieldChange(e) {\n      this.setState({\n        airlineBox: e.target.value\n      });\n      var filteredArray = this.state.airlineList.filter(function (airline) {\n        return airline.name.toUpperCase().includes(e.target.value.toUpperCase());\n      });\n      var limitedFilteredArray = filteredArray.slice(0, 20);\n      this.setState({\n        filteredAirlineList: limitedFilteredArray\n      });\n    }\n  }, {\n    key: \"handleAirlineSelect\",\n    value: function handleAirlineSelect(item) {\n      this.setState({\n        airlineBox: item.name\n      });\n      this.setState({\n        airline: item.iata_code\n      });\n      this.setState({\n        filteredAirlineList: []\n      });\n    }\n  }, {\n    key: \"handleDepartureFieldChange\",\n    value: function handleDepartureFieldChange(e) {\n      this.setState({\n        departureSiteBox: e.target.value\n      });\n      this.searchSites(e.target.value);\n    }\n  }, {\n    key: \"handleDepartureSiteSelect\",\n    value: function handleDepartureSiteSelect(item) {\n      this.setState({\n        departureSiteBox: item.label\n      });\n      this.setState({\n        departureSite: item.value\n      });\n      this.setState({\n        siteList: []\n      });\n    }\n  }, {\n    key: \"handleArrivalFieldChange\",\n    value: function handleArrivalFieldChange(e) {\n      this.setState({\n        arrivalSiteBox: e.target.value\n      });\n      this.searchSites(e.target.value);\n    }\n  }, {\n    key: \"handleArrivalSiteSelect\",\n    value: function handleArrivalSiteSelect(item) {\n      this.setState({\n        arrivalSiteBox: item.label\n      });\n      this.setState({\n        arrivalSite: item.value\n      });\n      this.setState({\n        siteList: []\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        id: \"main-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"main-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"header-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"DeparturePlanner\"), React.createElement(\"p\", {\n        className: \"header-subtext\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Never miss a flight again\"), React.createElement(\"div\", {\n        className: \"cur-date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \" Travel Date: \", \" \" + this.state.curDate.toLocaleDateString(\"en-US\", dateOptions))), React.createElement(\"div\", {\n        className: \"main-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(Fade, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, this.state.inputStatus === 0 && React.createElement(\"div\", {\n        className: \"home-address form-node\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"  Where are you leaving from?:\"), this.state.mapsAPI !== \"\" && React.createElement(AddressSearch, {\n        className: \"input-box\",\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=\" + this.state.mapsAPI + \"&v=3.exp&libraries=geometry,drawing,places\",\n        setAddress: this.getStartAddress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }))), React.createElement(Fade, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, this.state.inputStatus === 1 && React.createElement(\"div\", {\n        className: \"departure-airport form-node\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, \" Departure Airport:\"), React.createElement(Autocomplete, {\n        inputProps: {\n          className: \"input-box\"\n        },\n        getItemValue: function getItemValue(item) {\n          return item.value;\n        },\n        items: this.state.siteList,\n        renderItem: function renderItem(item, isHighlighted) {\n          return React.createElement(\"div\", {\n            style: {\n              background: isHighlighted ? 'lightgray' : 'white'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 175\n            },\n            __self: this\n          }, item.label);\n        },\n        value: this.state.departureSiteBox,\n        onChange: function onChange(e) {\n          return _this2.handleDepartureFieldChange(e);\n        },\n        onSelect: function onSelect(value, item) {\n          return _this2.handleDepartureSiteSelect(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }))), React.createElement(Fade, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, this.state.inputStatus === 1 && React.createElement(\"div\", {\n        className: \"arrival-airport form-node\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \" Arrival Airport:\"), React.createElement(Autocomplete, {\n        inputProps: {\n          className: \"input-box\"\n        },\n        getItemValue: function getItemValue(item) {\n          return item.value;\n        },\n        items: this.state.siteList,\n        renderItem: function renderItem(item, isHighlighted) {\n          return React.createElement(\"div\", {\n            style: {\n              background: isHighlighted ? 'lightgray' : 'white'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 190\n            },\n            __self: this\n          }, item.label);\n        },\n        value: this.state.arrivalSiteBox,\n        onChange: function onChange(e) {\n          return _this2.handleArrivalFieldChange(e);\n        },\n        onSelect: function onSelect(value, item) {\n          return _this2.handleArrivalSiteSelect(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }))), this.state.inputStatus === 2 && React.createElement(\"div\", {\n        className: \"flight-details form-node\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \" Airline:\"), React.createElement(Autocomplete, {\n        inputProps: {\n          className: \"input-box\"\n        },\n        getItemValue: function getItemValue(item) {\n          return item.iata_code;\n        },\n        items: this.state.filteredAirlineList,\n        renderItem: function renderItem(item, isHighlighted) {\n          return React.createElement(\"div\", {\n            style: {\n              background: isHighlighted ? 'lightgray' : 'white'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 206\n            },\n            __self: this\n          }, item.name);\n        },\n        value: this.state.airlineBox,\n        onChange: function onChange(e) {\n          return _this2.handleAirlineFieldChange(e);\n        },\n        onSelect: function onSelect(value, item) {\n          return _this2.handleAirlineSelect(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      })), this.state.inputStatus === 2 && React.createElement(\"div\", {\n        className: \"flight-details form-node\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, \" Flight# :\"), React.createElement(\"input\", {\n        className: \"input-box\",\n        value: this.state.flightNum,\n        type: \"text\",\n        onChange: this.updateFlightNum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"submit-button\",\n        onClick: this.handleNextButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"Next\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(Button, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, \"Start Over\"))));\n    }\n  }]);\n\n  return MainPage;\n}(Component);\n\nexport { MainPage as default };","map":{"version":3,"sources":["C:\\Users\\zhang\\OneDrive\\Documents\\Personal Projects\\departure-planner\\react-backend\\client\\src\\components\\MainPage.js"],"names":["React","Component","Button","Autocomplete","axios","Fade","AddressSearch","airlines","dateOptions","hour","minute","timeZoneName","weekday","year","month","day","MainPage","props","getStartAddress","address","setState","startAddress","state","departureSiteBox","departureSite","siteList","arrivalSiteBox","arrivalSite","airlineList","filteredAirlineList","airline","airlineBox","flightNum","curDate","Date","mapsAPI","inputStatus","handleAirlineFieldChange","bind","handleAirlineSelect","handleDepartureFieldChange","handleDepartureSiteSelect","searchSites","handleArrivalFieldChange","handleArrivalSiteSelect","updateFlightNum","handleNextButton","apiKey","process","env","REACT_APP_GOOGLE_API_KEY","inputNum","console","log","flightDate","getFullYear","getMonth","slice","getDate","history","push","pathname","homeAddress","keyword","airportKey","REACT_APP_AIRPORT_API_KEY","init","params","apikey","term","self","get","then","response","data","catch","error","e","target","value","filteredArray","filter","name","toUpperCase","includes","limitedFilteredArray","item","iata_code","label","toLocaleDateString","className","isHighlighted","background"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport { Button } from 'react-bootstrap';\r\nimport Autocomplete from 'react-autocomplete'\r\nimport axios from 'axios'\r\nimport Fade from 'react-reveal/Fade';\r\n\r\nimport AddressSearch from './AddressSearch.js'\r\nimport './Style.css'\r\nimport airlines from './Airlines.js'\r\n\r\n\r\nvar dateOptions = {hour: 'numeric', minute: 'numeric', timeZoneName: 'short', weekday: 'long', year: 'numeric', month: 'short', day: 'numeric'};\r\n\r\n\r\nexport default class MainPage extends Component {  \r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      departureSiteBox: \"\",\r\n      departureSite: \"\",\r\n      siteList : [],\r\n      arrivalSiteBox: \"\",\r\n      arrivalSite: \"\",\r\n      airlineList : airlines.airlines,\r\n      filteredAirlineList: [],\r\n      airline: \"\",\r\n      airlineBox: \"\",\r\n      flightNum: \"\",\r\n      curDate: new Date(),\r\n      startAddress: \"\",\r\n      mapsAPI: \"\",\r\n\r\n      inputStatus: 0\r\n      };\r\n\r\n      this.handleAirlineFieldChange = this.handleAirlineFieldChange.bind(this)\r\n      this.handleAirlineSelect = this.handleAirlineSelect.bind(this)\r\n      this.handleDepartureFieldChange = this.handleDepartureFieldChange.bind(this)\r\n      this.handleDepartureSiteSelect = this.handleDepartureSiteSelect.bind(this)\r\n      this.searchSites = this.searchSites.bind(this)\r\n      this.handleArrivalFieldChange = this.handleArrivalFieldChange.bind(this)\r\n      this.handleArrivalSiteSelect = this.handleArrivalSiteSelect.bind(this)\r\n      this.updateFlightNum = this.updateFlightNum.bind(this)\r\n      this.handleNextButton = this.handleNextButton.bind(this)\r\n      this.getStartAddress = this.getStartAddress.bind(this)\r\n    }  \r\n\r\n    componentDidMount(){\r\n      const apiKey = process.env.REACT_APP_GOOGLE_API_KEY;\r\n      this.setState({mapsAPI: apiKey})\r\n    }\r\n\r\n    handleNextButton(){\r\n      if(this.state.inputStatus < 2){\r\n        const inputNum = this.state.inputStatus;\r\n        this.setState({inputStatus: inputNum + 1});\r\n        console.log(this.state);\r\n      }\r\n\r\n      if(this.state.inputStatus === 2){\r\n        const flightDate = this.state.curDate.getFullYear() + \"\"\r\n       + ((\"0\" + (this.state.curDate.getMonth() + 1)).slice(-2)) + \"\" + ((\"0\" + this.state.curDate.getDate()).slice(-2)) \r\n      \r\n\r\n        this.props.history.push({\r\n          pathname: '/result', \r\n          state: {departureSite: this.state.departureSite, \r\n                  flightDate: flightDate, \r\n                  arrivalSite: this.state.arrivalSite,\r\n                  airline: this.state.airline, \r\n                  flightNum: this.state.flightNum,\r\n                  homeAddress: this.state.startAddress}\r\n          });\r\n        }\r\n    }\r\n\r\n    getStartAddress = (address) => {\r\n      this.setState({startAddress: address})\r\n    }\r\n\r\n\r\n    searchSites(keyword){\r\n      const airportKey = process.env.REACT_APP_AIRPORT_API_KEY;\r\n      if(keyword !== \"\"){\r\n        const init = {\r\n          params: {\r\n            apikey: airportKey,\r\n            term: keyword\r\n          }\r\n        }\r\n        var self = this;\r\n        axios.get(\"https://api.sandbox.amadeus.com/v1.2/airports/autocomplete\", init)\r\n        .then(function (response) {\r\n          self.setState({siteList: response.data});\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n      } \r\n    }\r\n\r\n    updateFlightNum(e){\r\n      this.setState({flightNum: e.target.value})\r\n    }\r\n\r\n    handleAirlineFieldChange(e){\r\n      this.setState({airlineBox: e.target.value})\r\n      const filteredArray = this.state.airlineList.filter(airline => \r\n        airline.name.toUpperCase().includes(e.target.value.toUpperCase()))\r\n      const limitedFilteredArray = filteredArray.slice(0, 20);\r\n      \r\n      this.setState({filteredAirlineList: limitedFilteredArray})\r\n    }\r\n\r\n    handleAirlineSelect(item){\r\n      this.setState({airlineBox: item.name})\r\n      this.setState({airline: item.iata_code})\r\n      this.setState({filteredAirlineList: []})\r\n\r\n    }\r\n\r\n    handleDepartureFieldChange(e){\r\n      this.setState({departureSiteBox: e.target.value})\r\n      this.searchSites(e.target.value)  \r\n    }\r\n\r\n    handleDepartureSiteSelect(item){\r\n      this.setState({departureSiteBox: item.label})\r\n      this.setState({departureSite: item.value})\r\n      this.setState({siteList: []})\r\n    }\r\n\r\n    handleArrivalFieldChange(e){\r\n      this.setState({arrivalSiteBox: e.target.value})\r\n      this.searchSites(e.target.value)  \r\n    }\r\n\r\n    handleArrivalSiteSelect(item){\r\n      this.setState({arrivalSiteBox: item.label})\r\n      this.setState({arrivalSite: item.value})\r\n      this.setState({siteList: []})\r\n    }\r\n\r\n\r\n\r\n    render(){\r\n      return(\r\n        <div id=\"main-page\">\r\n            <div className=\"main-header\">\r\n              <p className=\"header-title\">DeparturePlanner</p>\r\n              <p className=\"header-subtext\">Never miss a flight again</p>\r\n\r\n              <div className=\"cur-date\"> Travel Date: {\" \" + this.state.curDate.toLocaleDateString(\"en-US\", dateOptions)}</div>\r\n            </div>\r\n\r\n           \r\n\r\n            <div className=\"main-content\">\r\n              <div className=\"form-container\">\r\n                  <Fade>{this.state.inputStatus === 0 && <div className=\"home-address form-node\">  \r\n                  <div className=\"input-title\">  Where are you leaving from?:</div> \r\n                    {this.state.mapsAPI !== \"\" &&  <AddressSearch\r\n                        className=\"input-box\"\r\n                        googleMapURL={\"https://maps.googleapis.com/maps/api/js?key=\" + this.state.mapsAPI + \"&v=3.exp&libraries=geometry,drawing,places\"}\r\n                        setAddress ={this.getStartAddress}/> }\r\n                  </div>}</Fade>\r\n                  <Fade>{this.state.inputStatus === 1 && <div className=\"departure-airport form-node\">\r\n                  <div className=\"input-title\"> Departure Airport:</div>  \r\n                    <Autocomplete \r\n                      inputProps={{className:\"input-box\"}}\r\n                      getItemValue={(item) => item.value}\r\n                      items={this.state.siteList}\r\n                      renderItem={(item, isHighlighted) =>\r\n                        <div\r\n                        style={{ background: isHighlighted ? 'lightgray' : 'white' }}>\r\n                          {item.label}\r\n                        </div>}\r\n                      value={this.state.departureSiteBox}\r\n                      onChange={e => this.handleDepartureFieldChange(e)}\r\n                      onSelect={(value, item) => this.handleDepartureSiteSelect(item)}/> \r\n                  </div>}</Fade>\r\n                  <Fade>{this.state.inputStatus === 1 && <div className=\"arrival-airport form-node\">\r\n                  <div className=\"input-title\"> Arrival Airport:</div>\r\n                    <Autocomplete\r\n                      inputProps={{className:\"input-box\"}}\r\n                      getItemValue={(item) => item.value}\r\n                      items={this.state.siteList}\r\n                      renderItem={(item, isHighlighted) =>\r\n                        <div style={{ background: isHighlighted ? 'lightgray' : 'white' }}>\r\n                          {item.label}\r\n                        </div>\r\n                      }\r\n                      value={this.state.arrivalSiteBox}\r\n                      onChange={e => this.handleArrivalFieldChange(e)}\r\n                      onSelect={(value, item) => this.handleArrivalSiteSelect(item)}/> \r\n                  </div>}</Fade>\r\n                \r\n                  {this.state.inputStatus === 2 && <div className=\"flight-details form-node\"> \r\n                  <div className=\"input-title\"> Airline:</div>\r\n                    <Autocomplete\r\n                      inputProps={{className:\"input-box\"}}\r\n                      getItemValue={(item) => item.iata_code}\r\n                      items={this.state.filteredAirlineList}\r\n                      renderItem={(item, isHighlighted) =>\r\n                        <div style={{background: isHighlighted ? 'lightgray' : 'white'}}>\r\n                          {item.name}\r\n                        </div>}\r\n                      value={this.state.airlineBox}\r\n                      onChange={e => this.handleAirlineFieldChange(e)}\r\n                      onSelect={(value, item) => this.handleAirlineSelect(item)}/> \r\n                  </div>}\r\n                  {this.state.inputStatus === 2 && <div className=\"flight-details form-node\">\r\n                  <div className=\"input-title\"> Flight# :\r\n                  </div><input  className=\"input-box\" value={this.state.flightNum} type=\"text\" onChange={this.updateFlightNum}/></div>}\r\n              </div>\r\n              <div><Button className=\"submit-button\" onClick={this.handleNextButton}>Next</Button></div>\r\n          \r\n              <div><Button>Start Over</Button></div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }"]},"metadata":{},"sourceType":"module"}