{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\src\\\\components\\\\MainPage.js\";\n\n/* global google */\nimport React, { Component } from 'react';\nimport { Button } from 'react-bootstrap';\nimport Autocomplete from 'react-autocomplete';\nimport axios from 'axios';\nimport { withScriptjs, GoogleMap, withGoogleMap, DirectionsRenderer } from 'react-google-maps';\nimport { compose, withProps, lifecycle } from 'recompose'; // const { compose, withProps, lifecycle} = require(\"recompose\");\n\nimport AddressSearch from './AddressSearch.js';\nimport Header from './Header.js';\nimport './MainPage.css';\nimport airlines from './Airlines.js';\nvar dateOptions = {\n  hour: 'numeric',\n  minute: 'numeric',\n  timeZoneName: 'short',\n  weekday: 'long',\n  year: 'numeric',\n  month: 'short',\n  day: 'numeric'\n};\nvar MapWithADirectionsRenderer = compose(withProps({\n  loadingElement: React.createElement(\"div\", {\n    style: {\n      height: \"100%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }),\n  containerElement: React.createElement(\"div\", {\n    style: {\n      height: \"400px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }),\n  mapElement: React.createElement(\"div\", {\n    style: {\n      height: \"75%\",\n      width: \"100%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  })\n}), // withState('mapPane', 'onMapLoad'),\n// withHandlers(() => {\n//   const refs = {\n//     map: undefined,\n//   }\n//   return {\n//     onMapMounted: () => ref => {\n//       refs.map = ref;\n//     },\n//     onMapChanged: ({ onMapLoad }) => () => {\n//       onMapLoad(refs.map)\n//     }\n//   }\n// }),\nwithScriptjs, withGoogleMap, lifecycle({\n  componentDidMount: function componentDidMount() {\n    var _this = this;\n\n    var DirectionsService = new google.maps.DirectionsService();\n    DirectionsService.route({\n      origin: this.props.origin,\n      destination: this.props.destination,\n      travelMode: this.props.travelMode,\n      drivingOptions: this.props.drivingOptions\n    }, function (result, status) {\n      if (status === google.maps.DirectionsStatus.OK) {\n        console.log(result.routes[0].legs[0]);\n\n        _this.setState({\n          directions: result\n        });\n      } else {\n        console.error(\"error fetching directions \".concat(result));\n      }\n    });\n  }\n}))(function (props) {\n  return React.createElement(GoogleMap, {\n    defaultCenter: new google.maps.LatLng(41.8507300, -87.6512600),\n    options: {\n      disableDefaultUI: true,\n      gestureHandling: \"none\"\n    } // ref={props.onMapMounted}\n    // onTilesLoaded={props.onMapChanged}\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, props.directions && React.createElement(DirectionsRenderer, {\n    directions: props.directions,\n    panel: props.mapRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }));\n});\n\nvar MainPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MainPage, _Component);\n\n  function MainPage(props) {\n    var _this2;\n\n    _classCallCheck(this, MainPage);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(MainPage).call(this, props));\n\n    _this2.getStartAddress = function (address) {\n      _this2.setState({\n        startAddress: address\n      });\n\n      console.log(_this2.state);\n    };\n\n    _this2.state = {\n      departureSiteBox: \"\",\n      departureSite: \"\",\n      siteList: [],\n      arrivalSiteBox: \"\",\n      arrivalSite: \"\",\n      airlineList: airlines.airlines,\n      filteredAirlineList: [],\n      airline: \"\",\n      airlineBox: \"\",\n      flightNum: \"\",\n      curDate: new Date(),\n      startAddress: \"\",\n      mapsAPI: \"\",\n      testOrigin: \"Eaton Centre\",\n      testDest: \"YYZ\",\n      travelMode: \"DRIVING\",\n      drivingOptions: {\n        departureTime: new Date(),\n        trafficModel: 'optimistic'\n      }\n    };\n    _this2.handleAirlineFieldChange = _this2.handleAirlineFieldChange.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    _this2.handleAirlineSelect = _this2.handleAirlineSelect.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    _this2.handleDepartureFieldChange = _this2.handleDepartureFieldChange.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    _this2.handleDepartureSiteSelect = _this2.handleDepartureSiteSelect.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    _this2.searchSites = _this2.searchSites.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    _this2.handleArrivalFieldChange = _this2.handleArrivalFieldChange.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    _this2.handleArrivalSiteSelect = _this2.handleArrivalSiteSelect.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    _this2.updateFlightNum = _this2.updateFlightNum.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    _this2.handleSubmit = _this2.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    _this2.getStartAddress = _this2.getStartAddress.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    return _this2;\n  }\n\n  _createClass(MainPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var apiKey = process.env.REACT_APP_GOOGLE_API_KEY;\n      this.setState({\n        mapsAPI: apiKey\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit() {\n      var flightDate = this.state.curDate.getFullYear() + \"\" + (\"0\" + (this.state.curDate.getMonth() + 1)).slice(-2) + \"\" + (\"0\" + this.state.curDate.getDate()).slice(-2);\n      this.props.history.push({\n        pathname: '/result',\n        state: {\n          departureSite: this.state.departureSite,\n          flightDate: flightDate,\n          arrivalSite: this.state.arrivalSite,\n          airline: this.state.airline,\n          flightNum: this.state.flightNum\n        }\n      });\n    }\n  }, {\n    key: \"searchSites\",\n    value: function searchSites(keyword) {\n      var airportKey = process.env.REACT_APP_AIRPORT_API_KEY;\n\n      if (keyword !== \"\") {\n        var init = {\n          params: {\n            apikey: airportKey,\n            term: keyword\n          }\n        };\n        var self = this;\n        axios.get(\"https://api.sandbox.amadeus.com/v1.2/airports/autocomplete\", init).then(function (response) {\n          self.setState({\n            siteList: response.data\n          });\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    }\n  }, {\n    key: \"updateFlightNum\",\n    value: function updateFlightNum(e) {\n      this.setState({\n        flightNum: e.target.value\n      });\n    }\n  }, {\n    key: \"handleAirlineFieldChange\",\n    value: function handleAirlineFieldChange(e) {\n      this.setState({\n        airlineBox: e.target.value\n      });\n      var filteredArray = this.state.airlineList.filter(function (airline) {\n        return airline.name.toUpperCase().includes(e.target.value.toUpperCase());\n      });\n      var limitedFilteredArray = filteredArray.slice(0, 20);\n      this.setState({\n        filteredAirlineList: limitedFilteredArray\n      });\n    }\n  }, {\n    key: \"handleAirlineSelect\",\n    value: function handleAirlineSelect(item) {\n      this.setState({\n        airlineBox: item.name\n      });\n      this.setState({\n        airline: item.iata_code\n      });\n      this.setState({\n        filteredAirlineList: []\n      });\n    }\n  }, {\n    key: \"handleDepartureFieldChange\",\n    value: function handleDepartureFieldChange(e) {\n      this.setState({\n        departureSiteBox: e.target.value\n      });\n      this.searchSites(e.target.value);\n    }\n  }, {\n    key: \"handleDepartureSiteSelect\",\n    value: function handleDepartureSiteSelect(item) {\n      this.setState({\n        departureSiteBox: item.label\n      });\n      this.setState({\n        departureSite: item.value\n      });\n      this.setState({\n        siteList: []\n      });\n    }\n  }, {\n    key: \"handleArrivalFieldChange\",\n    value: function handleArrivalFieldChange(e) {\n      this.setState({\n        arrivalSiteBox: e.target.value\n      });\n      this.searchSites(e.target.value);\n    }\n  }, {\n    key: \"handleArrivalSiteSelect\",\n    value: function handleArrivalSiteSelect(item) {\n      this.setState({\n        arrivalSiteBox: item.label\n      });\n      this.setState({\n        arrivalSite: item.value\n      });\n      this.setState({\n        siteList: []\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        id: \"main-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"home-address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \"Home Address:\", React.createElement(\"div\", {\n        className: \"address-autofill\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, this.state.mapsAPI !== \"\" && React.createElement(AddressSearch, {\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=\" + this.state.mapsAPI + \"&v=3.exp&libraries=geometry,drawing,places\",\n        setAddress: this.getStartAddress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"cur-date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \" Travel Date:\", \" \" + this.state.curDate.toLocaleDateString(\"en-US\", dateOptions)), this.state.mapsAPI !== \"\" && React.createElement(\"div\", {\n        className: \"mapPane\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(MapWithADirectionsRenderer, {\n        origin: this.state.testOrigin,\n        destination: this.state.testDest,\n        travelMode: this.state.travelMode,\n        drivingOptions: this.state.drivingOptions,\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=\" + this.state.mapsAPI + \"&v=3.exp&libraries=geometry,drawing,places\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"airports\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"airport\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, \"Departure Airport:\", React.createElement(Autocomplete, {\n        getItemValue: function getItemValue(item) {\n          return item.value;\n        },\n        items: this.state.siteList,\n        renderItem: function renderItem(item, isHighlighted) {\n          return React.createElement(\"div\", {\n            style: {\n              background: isHighlighted ? 'lightgray' : 'white'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 260\n            },\n            __self: this\n          }, item.label);\n        },\n        value: this.state.departureSiteBox,\n        onChange: function onChange(e) {\n          return _this3.handleDepartureFieldChange(e);\n        },\n        onSelect: function onSelect(value, item) {\n          return _this3.handleDepartureSiteSelect(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"airport\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, \"Arrival Airport:\", React.createElement(Autocomplete, {\n        getItemValue: function getItemValue(item) {\n          return item.value;\n        },\n        items: this.state.siteList,\n        renderItem: function renderItem(item, isHighlighted) {\n          return React.createElement(\"div\", {\n            style: {\n              background: isHighlighted ? 'lightgray' : 'white'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 274\n            },\n            __self: this\n          }, item.label);\n        },\n        value: this.state.arrivalSiteBox,\n        onChange: function onChange(e) {\n          return _this3.handleArrivalFieldChange(e);\n        },\n        onSelect: function onSelect(value, item) {\n          return _this3.handleArrivalSiteSelect(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"flight-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flight-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, \"Airline:\", React.createElement(Autocomplete, {\n        getItemValue: function getItemValue(item) {\n          return item.iata_code;\n        },\n        items: this.state.filteredAirlineList,\n        renderItem: function renderItem(item, isHighlighted) {\n          return React.createElement(\"div\", {\n            style: {\n              background: isHighlighted ? 'lightgray' : 'white'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 290\n            },\n            __self: this\n          }, item.name);\n        },\n        value: this.state.airlineBox,\n        onChange: function onChange(e) {\n          return _this3.handleAirlineFieldChange(e);\n        },\n        onSelect: function onSelect(value, item) {\n          return _this3.handleAirlineSelect(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"flight-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, \"Flight #: \", React.createElement(\"input\", {\n        value: this.state.flightNum,\n        type: \"text\",\n        onChange: this.updateFlightNum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, \"Calculate Travel Times\"))));\n    }\n  }]);\n\n  return MainPage;\n}(Component);\n\nexport { MainPage as default };","map":{"version":3,"sources":["C:\\Users\\zhang\\OneDrive\\Documents\\Personal Projects\\departure-planner\\react-backend\\client\\src\\components\\MainPage.js"],"names":["React","Component","Button","Autocomplete","axios","withScriptjs","GoogleMap","withGoogleMap","DirectionsRenderer","compose","withProps","lifecycle","AddressSearch","Header","airlines","dateOptions","hour","minute","timeZoneName","weekday","year","month","day","MapWithADirectionsRenderer","loadingElement","height","containerElement","mapElement","width","componentDidMount","DirectionsService","google","maps","route","origin","props","destination","travelMode","drivingOptions","result","status","DirectionsStatus","OK","console","log","routes","legs","setState","directions","error","LatLng","disableDefaultUI","gestureHandling","mapRef","MainPage","getStartAddress","address","startAddress","state","departureSiteBox","departureSite","siteList","arrivalSiteBox","arrivalSite","airlineList","filteredAirlineList","airline","airlineBox","flightNum","curDate","Date","mapsAPI","testOrigin","testDest","departureTime","trafficModel","handleAirlineFieldChange","bind","handleAirlineSelect","handleDepartureFieldChange","handleDepartureSiteSelect","searchSites","handleArrivalFieldChange","handleArrivalSiteSelect","updateFlightNum","handleSubmit","apiKey","process","env","REACT_APP_GOOGLE_API_KEY","flightDate","getFullYear","getMonth","slice","getDate","history","push","pathname","keyword","airportKey","REACT_APP_AIRPORT_API_KEY","init","params","apikey","term","self","get","then","response","data","catch","e","target","value","filteredArray","filter","name","toUpperCase","includes","limitedFilteredArray","item","iata_code","label","toLocaleDateString","isHighlighted","background"],"mappings":"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","sourcesContent":["/* global google */\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport { Button } from 'react-bootstrap';\r\nimport Autocomplete from 'react-autocomplete'\r\nimport axios from 'axios'\r\nimport { withScriptjs, GoogleMap, withGoogleMap, DirectionsRenderer} from 'react-google-maps';\r\n\r\nimport { compose, withProps, lifecycle} from 'recompose'\r\n// const { compose, withProps, lifecycle} = require(\"recompose\");\r\n\r\nimport AddressSearch from './AddressSearch.js'\r\nimport Header from './Header.js'\r\nimport './MainPage.css'\r\nimport airlines from './Airlines.js'\r\n\r\n\r\nvar dateOptions = {hour: 'numeric', minute: 'numeric', timeZoneName: 'short', weekday: 'long', year: 'numeric', month: 'short', day: 'numeric'};\r\n\r\n\r\nconst MapWithADirectionsRenderer = compose(\r\n  withProps({\r\n    loadingElement: <div style={{ height: `100%` }} />,\r\n    containerElement: <div style={{ height: `400px` }} />,\r\n    mapElement: <div style={{ height: `75%`, width: `100%` }} />,\r\n  }),\r\n  // withState('mapPane', 'onMapLoad'),\r\n  // withHandlers(() => {\r\n  //   const refs = {\r\n  //     map: undefined,\r\n  //   }\r\n  //   return {\r\n  //     onMapMounted: () => ref => {\r\n  //       refs.map = ref;\r\n  //     },\r\n  //     onMapChanged: ({ onMapLoad }) => () => {\r\n  //       onMapLoad(refs.map)\r\n  //     }\r\n  //   }\r\n  // }),\r\n  withScriptjs,\r\n  withGoogleMap,\r\n  lifecycle({\r\n    componentDidMount() {\r\n      const DirectionsService = new google.maps.DirectionsService();\r\n      DirectionsService.route({\r\n        origin: this.props.origin,\r\n        destination: this.props.destination,\r\n        travelMode: this.props.travelMode,\r\n        drivingOptions: this.props.drivingOptions}, \r\n        \r\n        (result, status) => {\r\n        if (status === google.maps.DirectionsStatus.OK) {\r\n          console.log(result.routes[0].legs[0]);\r\n          this.setState({\r\n            directions: result,\r\n          });\r\n        } else {\r\n          console.error(`error fetching directions ${result}`);\r\n        }\r\n      });\r\n    }\r\n  })\r\n)(props =>\r\n  <GoogleMap\r\n    defaultCenter={new google.maps.LatLng(41.8507300, -87.6512600)}\r\n    options={({\r\n      disableDefaultUI: true,\r\n      gestureHandling: \"none\",\r\n\r\n    })}\r\n\r\n    // ref={props.onMapMounted}\r\n    // onTilesLoaded={props.onMapChanged}\r\n    >\r\n    {props.directions && \r\n    <DirectionsRenderer \r\n    directions={props.directions} \r\n    panel={props.mapRef}\r\n    />\r\n    }\r\n  </GoogleMap>\r\n);\r\n\r\nexport default class MainPage extends Component {  \r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      departureSiteBox: \"\",\r\n      departureSite: \"\",\r\n      siteList : [],\r\n      arrivalSiteBox: \"\",\r\n      arrivalSite: \"\",\r\n      airlineList : airlines.airlines,\r\n      filteredAirlineList: [],\r\n      airline: \"\",\r\n      airlineBox: \"\",\r\n      flightNum: \"\",\r\n      curDate: new Date(),\r\n      startAddress: \"\",\r\n\r\n      mapsAPI: \"\", \r\n      \r\n      \r\n\r\n      testOrigin: \"Eaton Centre\",\r\n      testDest: \"YYZ\",\r\n      travelMode: \"DRIVING\",\r\n      drivingOptions: {\r\n        departureTime: new Date(),\r\n        trafficModel: 'optimistic'\r\n      },\r\n      };\r\n\r\n      this.handleAirlineFieldChange = this.handleAirlineFieldChange.bind(this)\r\n      this.handleAirlineSelect = this.handleAirlineSelect.bind(this)\r\n\r\n      this.handleDepartureFieldChange = this.handleDepartureFieldChange.bind(this)\r\n      this.handleDepartureSiteSelect = this.handleDepartureSiteSelect.bind(this)\r\n      this.searchSites = this.searchSites.bind(this)\r\n      this.handleArrivalFieldChange = this.handleArrivalFieldChange.bind(this)\r\n      this.handleArrivalSiteSelect = this.handleArrivalSiteSelect.bind(this)\r\n\r\n      this.updateFlightNum = this.updateFlightNum.bind(this)\r\n      this.handleSubmit = this.handleSubmit.bind(this)\r\n\r\n      this.getStartAddress = this.getStartAddress.bind(this)\r\n    }  \r\n\r\n    componentDidMount(){\r\n      const apiKey = process.env.REACT_APP_GOOGLE_API_KEY;\r\n      this.setState({mapsAPI: apiKey})\r\n    }\r\n\r\n    handleSubmit(){\r\n      const flightDate = this.state.curDate.getFullYear() + \"\"\r\n       + ((\"0\" + (this.state.curDate.getMonth() + 1)).slice(-2)) + \"\" + ((\"0\" + this.state.curDate.getDate()).slice(-2)) \r\n      \r\n\r\n      this.props.history.push({\r\n        pathname: '/result', \r\n        state: {departureSite: this.state.departureSite, \r\n                flightDate: flightDate, \r\n                arrivalSite: this.state.arrivalSite,\r\n                airline: this.state.airline, \r\n                flightNum: this.state.flightNum}\r\n        });\r\n    }\r\n\r\n    getStartAddress = (address) => {\r\n      this.setState({startAddress: address})\r\n      console.log(this.state);\r\n    }\r\n\r\n\r\n    searchSites(keyword){\r\n      const airportKey = process.env.REACT_APP_AIRPORT_API_KEY;\r\n      if(keyword !== \"\"){\r\n        const init = {\r\n          params: {\r\n            apikey: airportKey,\r\n            term: keyword\r\n          }\r\n        }\r\n        var self = this;\r\n\r\n        axios.get(\"https://api.sandbox.amadeus.com/v1.2/airports/autocomplete\", init)\r\n        .then(function (response) {\r\n          self.setState({siteList: response.data});\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n      } \r\n    }\r\n\r\n    updateFlightNum(e){\r\n      this.setState({flightNum: e.target.value})\r\n    }\r\n\r\n\r\n    handleAirlineFieldChange(e){\r\n      this.setState({airlineBox: e.target.value})\r\n      const filteredArray = this.state.airlineList.filter(airline => \r\n        airline.name.toUpperCase().includes(e.target.value.toUpperCase()))\r\n      const limitedFilteredArray = filteredArray.slice(0, 20);\r\n      \r\n      this.setState({filteredAirlineList: limitedFilteredArray})\r\n    }\r\n\r\n    handleAirlineSelect(item){\r\n      this.setState({airlineBox: item.name})\r\n      this.setState({airline: item.iata_code})\r\n      this.setState({filteredAirlineList: []})\r\n\r\n    }\r\n\r\n\r\n    handleDepartureFieldChange(e){\r\n      this.setState({departureSiteBox: e.target.value})\r\n      this.searchSites(e.target.value)  \r\n    }\r\n\r\n    handleDepartureSiteSelect(item){\r\n      this.setState({departureSiteBox: item.label})\r\n      this.setState({departureSite: item.value})\r\n      this.setState({siteList: []})\r\n    }\r\n\r\n    handleArrivalFieldChange(e){\r\n      this.setState({arrivalSiteBox: e.target.value})\r\n      this.searchSites(e.target.value)  \r\n    }\r\n\r\n    handleArrivalSiteSelect(item){\r\n      this.setState({arrivalSiteBox: item.label})\r\n      this.setState({arrivalSite: item.value})\r\n      this.setState({siteList: []})\r\n    }\r\n\r\n\r\n    render(){\r\n      return(\r\n        <div id=\"main-page\">\r\n            <Header>              \r\n            </Header>\r\n\r\n              <div className=\"home-address\">\r\n                Home Address:\r\n                <div className=\"address-autofill\">\r\n                {this.state.mapsAPI !== \"\" &&  <AddressSearch\r\n                    googleMapURL={\"https://maps.googleapis.com/maps/api/js?key=\" + this.state.mapsAPI + \"&v=3.exp&libraries=geometry,drawing,places\"}\r\n                    setAddress ={this.getStartAddress}\r\n                    /> \r\n                }\r\n                </div>\r\n              </div>\r\n            <div className=\"form-container\">\r\n              <div className=\"cur-date\"> Travel Date:\r\n              {\" \" + this.state.curDate.toLocaleDateString(\"en-US\", dateOptions)}\r\n              </div>\r\n                {this.state.mapsAPI !== \"\" && \r\n                <div className=\"mapPane\">        \r\n                  <MapWithADirectionsRenderer \r\n                    origin={this.state.testOrigin} \r\n                    destination={this.state.testDest} \r\n                    travelMode={this.state.travelMode} \r\n                    drivingOptions={this.state.drivingOptions}\r\n                    googleMapURL={\"https://maps.googleapis.com/maps/api/js?key=\" + this.state.mapsAPI + \"&v=3.exp&libraries=geometry,drawing,places\"}/> \r\n                </div>\r\n                }\r\n              <div className=\"airports\"> \r\n\r\n                  <div className=\"airport\">Departure Airport:  \r\n                    <Autocomplete\r\n                      getItemValue={(item) => item.value}\r\n                      items={this.state.siteList}\r\n                      renderItem={(item, isHighlighted) =>\r\n                        <div style={{ background: isHighlighted ? 'lightgray' : 'white' }}>\r\n                          {item.label}\r\n                        </div>\r\n                      }\r\n                      value={this.state.departureSiteBox}\r\n                      onChange={e => this.handleDepartureFieldChange(e)}\r\n                      onSelect={(value, item) => this.handleDepartureSiteSelect(item)}\r\n                      /> \r\n                  </div>\r\n                  <div className=\"airport\">Arrival Airport:\r\n                    <Autocomplete\r\n                      getItemValue={(item) => item.value}\r\n                      items={this.state.siteList}\r\n                      renderItem={(item, isHighlighted) =>\r\n                        <div style={{ background: isHighlighted ? 'lightgray' : 'white' }}>\r\n                          {item.label}\r\n                        </div>\r\n                      }\r\n                      value={this.state.arrivalSiteBox}\r\n                      onChange={e => this.handleArrivalFieldChange(e)}\r\n                      onSelect={(value, item) => this.handleArrivalSiteSelect(item)}\r\n                    /> \r\n                  </div>\r\n              </div>\r\n              <div className=\"flight-info\"> \r\n                  <div className=\"flight-details\">Airline: \r\n                    <Autocomplete\r\n                      getItemValue={(item) => item.iata_code}\r\n                      items={this.state.filteredAirlineList}\r\n                      renderItem={(item, isHighlighted) =>\r\n                        <div style={{ background: isHighlighted ? 'lightgray' : 'white' }}>\r\n                          {item.name}\r\n                        </div>\r\n                      }\r\n                      value={this.state.airlineBox}\r\n                      onChange={e => this.handleAirlineFieldChange(e)}\r\n                      onSelect={(value, item) => this.handleAirlineSelect(item)}\r\n                    /> \r\n                  </div>\r\n                  <div className=\"flight-details\">Flight #: <input value={this.state.flightNum} type=\"text\" onChange={this.updateFlightNum}/></div>\r\n              </div>\r\n              <div><Button onClick={this.handleSubmit}>Calculate Travel Times</Button></div>\r\n            </div>\r\n        </div>\r\n      );\r\n    }\r\n  }"]},"metadata":{},"sourceType":"module"}