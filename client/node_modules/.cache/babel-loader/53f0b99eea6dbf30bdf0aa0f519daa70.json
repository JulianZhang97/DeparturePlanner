{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\src\\\\components\\\\MainPage.js\";\n\n/* global google */\nimport React, { Component } from 'react';\nimport { Button } from 'react-bootstrap';\nimport Autocomplete from 'react-autocomplete';\nimport axios from 'axios';\nimport { withScriptjs, GoogleMap, withGoogleMap, DirectionsRenderer } from 'react-google-maps';\nimport { compose, withProps, lifecycle } from 'recompose';\nimport AddressSearch from './AddressSearch.js';\nimport Header from './Header.js';\nimport './MainPage.css';\nimport airlines from './Airlines.js';\nvar dateOptions = {\n  hour: 'numeric',\n  minute: 'numeric',\n  timeZoneName: 'short',\n  weekday: 'long',\n  year: 'numeric',\n  month: 'short',\n  day: 'numeric'\n};\n\nvar MainPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MainPage, _Component);\n\n  function MainPage(props) {\n    var _this;\n\n    _classCallCheck(this, MainPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MainPage).call(this, props));\n\n    _this.getStartAddress = function (address) {\n      _this.setState({\n        startAddress: address\n      });\n\n      console.log(_this.state);\n    };\n\n    _this.state = {\n      departureSiteBox: \"\",\n      departureSite: \"\",\n      siteList: [],\n      arrivalSiteBox: \"\",\n      arrivalSite: \"\",\n      airlineList: airlines.airlines,\n      filteredAirlineList: [],\n      airline: \"\",\n      airlineBox: \"\",\n      flightNum: \"\",\n      curDate: new Date(),\n      startAddress: \"\",\n      mapsAPI: \"\",\n      testOrigin: \"Eaton Centre\",\n      testDest: \"YYZ\",\n      travelMode: \"DRIVING\",\n      drivingOptions: {\n        departureTime: new Date(),\n        trafficModel: 'optimistic'\n      }\n    };\n    _this.handleAirlineFieldChange = _this.handleAirlineFieldChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleAirlineSelect = _this.handleAirlineSelect.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDepartureFieldChange = _this.handleDepartureFieldChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDepartureSiteSelect = _this.handleDepartureSiteSelect.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.searchSites = _this.searchSites.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleArrivalFieldChange = _this.handleArrivalFieldChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleArrivalSiteSelect = _this.handleArrivalSiteSelect.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateFlightNum = _this.updateFlightNum.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getStartAddress = _this.getStartAddress.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MainPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var apiKey = process.env.REACT_APP_GOOGLE_API_KEY;\n      this.setState({\n        mapsAPI: apiKey\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit() {\n      var flightDate = this.state.curDate.getFullYear() + \"\" + (\"0\" + (this.state.curDate.getMonth() + 1)).slice(-2) + \"\" + (\"0\" + this.state.curDate.getDate()).slice(-2);\n      this.props.history.push({\n        pathname: '/result',\n        state: {\n          departureSite: this.state.departureSite,\n          flightDate: flightDate,\n          arrivalSite: this.state.arrivalSite,\n          airline: this.state.airline,\n          flightNum: this.state.flightNum\n        }\n      });\n    }\n  }, {\n    key: \"searchSites\",\n    value: function searchSites(keyword) {\n      var airportKey = process.env.REACT_APP_AIRPORT_API_KEY;\n\n      if (keyword !== \"\") {\n        var init = {\n          params: {\n            apikey: airportKey,\n            term: keyword\n          }\n        };\n        var self = this;\n        axios.get(\"https://api.sandbox.amadeus.com/v1.2/airports/autocomplete\", init).then(function (response) {\n          self.setState({\n            siteList: response.data\n          });\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    }\n  }, {\n    key: \"updateFlightNum\",\n    value: function updateFlightNum(e) {\n      this.setState({\n        flightNum: e.target.value\n      });\n    }\n  }, {\n    key: \"handleAirlineFieldChange\",\n    value: function handleAirlineFieldChange(e) {\n      this.setState({\n        airlineBox: e.target.value\n      });\n      var filteredArray = this.state.airlineList.filter(function (airline) {\n        return airline.name.toUpperCase().includes(e.target.value.toUpperCase());\n      });\n      var limitedFilteredArray = filteredArray.slice(0, 20);\n      this.setState({\n        filteredAirlineList: limitedFilteredArray\n      });\n    }\n  }, {\n    key: \"handleAirlineSelect\",\n    value: function handleAirlineSelect(item) {\n      this.setState({\n        airlineBox: item.name\n      });\n      this.setState({\n        airline: item.iata_code\n      });\n      this.setState({\n        filteredAirlineList: []\n      });\n    }\n  }, {\n    key: \"handleDepartureFieldChange\",\n    value: function handleDepartureFieldChange(e) {\n      this.setState({\n        departureSiteBox: e.target.value\n      });\n      this.searchSites(e.target.value);\n    }\n  }, {\n    key: \"handleDepartureSiteSelect\",\n    value: function handleDepartureSiteSelect(item) {\n      this.setState({\n        departureSiteBox: item.label\n      });\n      this.setState({\n        departureSite: item.value\n      });\n      this.setState({\n        siteList: []\n      });\n    }\n  }, {\n    key: \"handleArrivalFieldChange\",\n    value: function handleArrivalFieldChange(e) {\n      this.setState({\n        arrivalSiteBox: e.target.value\n      });\n      this.searchSites(e.target.value);\n    }\n  }, {\n    key: \"handleArrivalSiteSelect\",\n    value: function handleArrivalSiteSelect(item) {\n      this.setState({\n        arrivalSiteBox: item.label\n      });\n      this.setState({\n        arrivalSite: item.value\n      });\n      this.setState({\n        siteList: []\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        id: \"main-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"home-address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Home Address:\", React.createElement(\"div\", {\n        className: \"address-autofill\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, this.state.mapsAPI !== \"\" && React.createElement(AddressSearch, {\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=\" + this.state.mapsAPI + \"&v=3.exp&libraries=geometry,drawing,places\",\n        setAddress: this.getStartAddress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"cur-date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \" Travel Date:\", \" \" + this.state.curDate.toLocaleDateString(\"en-US\", dateOptions)), React.createElement(\"div\", {\n        className: \"airports\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"airport\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"Departure Airport:\", React.createElement(Autocomplete, {\n        getItemValue: function getItemValue(item) {\n          return item.value;\n        },\n        items: this.state.siteList,\n        renderItem: function renderItem(item, isHighlighted) {\n          return React.createElement(\"div\", {\n            style: {\n              background: isHighlighted ? 'lightgray' : 'white'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 185\n            },\n            __self: this\n          }, item.label);\n        },\n        value: this.state.departureSiteBox,\n        onChange: function onChange(e) {\n          return _this2.handleDepartureFieldChange(e);\n        },\n        onSelect: function onSelect(value, item) {\n          return _this2.handleDepartureSiteSelect(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"airport\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"Arrival Airport:\", React.createElement(Autocomplete, {\n        getItemValue: function getItemValue(item) {\n          return item.value;\n        },\n        items: this.state.siteList,\n        renderItem: function renderItem(item, isHighlighted) {\n          return React.createElement(\"div\", {\n            style: {\n              background: isHighlighted ? 'lightgray' : 'white'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199\n            },\n            __self: this\n          }, item.label);\n        },\n        value: this.state.arrivalSiteBox,\n        onChange: function onChange(e) {\n          return _this2.handleArrivalFieldChange(e);\n        },\n        onSelect: function onSelect(value, item) {\n          return _this2.handleArrivalSiteSelect(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"flight-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flight-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Airline:\", React.createElement(Autocomplete, {\n        getItemValue: function getItemValue(item) {\n          return item.iata_code;\n        },\n        items: this.state.filteredAirlineList,\n        renderItem: function renderItem(item, isHighlighted) {\n          return React.createElement(\"div\", {\n            style: {\n              background: isHighlighted ? 'lightgray' : 'white'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 215\n            },\n            __self: this\n          }, item.name);\n        },\n        value: this.state.airlineBox,\n        onChange: function onChange(e) {\n          return _this2.handleAirlineFieldChange(e);\n        },\n        onSelect: function onSelect(value, item) {\n          return _this2.handleAirlineSelect(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"flight-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \"Flight #: \", React.createElement(\"input\", {\n        value: this.state.flightNum,\n        type: \"text\",\n        onChange: this.updateFlightNum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Calculate Travel Times\"))));\n    }\n  }]);\n\n  return MainPage;\n}(Component);\n\nexport { MainPage as default };","map":{"version":3,"sources":["C:\\Users\\zhang\\OneDrive\\Documents\\Personal Projects\\departure-planner\\react-backend\\client\\src\\components\\MainPage.js"],"names":["React","Component","Button","Autocomplete","axios","withScriptjs","GoogleMap","withGoogleMap","DirectionsRenderer","compose","withProps","lifecycle","AddressSearch","Header","airlines","dateOptions","hour","minute","timeZoneName","weekday","year","month","day","MainPage","props","getStartAddress","address","setState","startAddress","console","log","state","departureSiteBox","departureSite","siteList","arrivalSiteBox","arrivalSite","airlineList","filteredAirlineList","airline","airlineBox","flightNum","curDate","Date","mapsAPI","testOrigin","testDest","travelMode","drivingOptions","departureTime","trafficModel","handleAirlineFieldChange","bind","handleAirlineSelect","handleDepartureFieldChange","handleDepartureSiteSelect","searchSites","handleArrivalFieldChange","handleArrivalSiteSelect","updateFlightNum","handleSubmit","apiKey","process","env","REACT_APP_GOOGLE_API_KEY","flightDate","getFullYear","getMonth","slice","getDate","history","push","pathname","keyword","airportKey","REACT_APP_AIRPORT_API_KEY","init","params","apikey","term","self","get","then","response","data","catch","error","e","target","value","filteredArray","filter","name","toUpperCase","includes","limitedFilteredArray","item","iata_code","label","toLocaleDateString","isHighlighted","background"],"mappings":";;;;;;;;AAAA;AAEA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,SAASC,MAAT,QAAuB,iBAAvB;AACA,OAAOC,YAAP,MAAyB,oBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,EAAuBC,SAAvB,EAAkCC,aAAlC,EAAiDC,kBAAjD,QAA0E,mBAA1E;AAEA,SAASC,OAAT,EAAkBC,SAAlB,EAA6BC,SAA7B,QAA6C,WAA7C;AAEA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAO,gBAAP;AACA,OAAOC,QAAP,MAAqB,eAArB;AAGA,IAAIC,WAAW,GAAG;AAACC,EAAAA,IAAI,EAAE,SAAP;AAAkBC,EAAAA,MAAM,EAAE,SAA1B;AAAqCC,EAAAA,YAAY,EAAE,OAAnD;AAA4DC,EAAAA,OAAO,EAAE,MAArE;AAA6EC,EAAAA,IAAI,EAAE,SAAnF;AAA8FC,EAAAA,KAAK,EAAE,OAArG;AAA8GC,EAAAA,GAAG,EAAE;AAAnH,CAAlB;;IAGqBC,Q;;;;;AACnB,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,kFAAMA,KAAN;;AADiB,UAgEjBC,eAhEiB,GAgEC,UAACC,OAAD,EAAa;AAC7B,YAAKC,QAAL,CAAc;AAACC,QAAAA,YAAY,EAAEF;AAAf,OAAd;;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAjB;AACD,KAnEgB;;AAEjB,UAAKA,KAAL,GAAa;AACXC,MAAAA,gBAAgB,EAAE,EADP;AAEXC,MAAAA,aAAa,EAAE,EAFJ;AAGXC,MAAAA,QAAQ,EAAG,EAHA;AAIXC,MAAAA,cAAc,EAAE,EAJL;AAKXC,MAAAA,WAAW,EAAE,EALF;AAMXC,MAAAA,WAAW,EAAGvB,QAAQ,CAACA,QANZ;AAOXwB,MAAAA,mBAAmB,EAAE,EAPV;AAQXC,MAAAA,OAAO,EAAE,EARE;AASXC,MAAAA,UAAU,EAAE,EATD;AAUXC,MAAAA,SAAS,EAAE,EAVA;AAWXC,MAAAA,OAAO,EAAE,IAAIC,IAAJ,EAXE;AAYXf,MAAAA,YAAY,EAAE,EAZH;AAcXgB,MAAAA,OAAO,EAAE,EAdE;AAkBXC,MAAAA,UAAU,EAAE,cAlBD;AAmBXC,MAAAA,QAAQ,EAAE,KAnBC;AAoBXC,MAAAA,UAAU,EAAE,SApBD;AAqBXC,MAAAA,cAAc,EAAE;AACdC,QAAAA,aAAa,EAAE,IAAIN,IAAJ,EADD;AAEdO,QAAAA,YAAY,EAAE;AAFA;AArBL,KAAb;AA2BE,UAAKC,wBAAL,GAAgC,MAAKA,wBAAL,CAA8BC,IAA9B,uDAAhC;AACA,UAAKC,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBD,IAAzB,uDAA3B;AAEA,UAAKE,0BAAL,GAAkC,MAAKA,0BAAL,CAAgCF,IAAhC,uDAAlC;AACA,UAAKG,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BH,IAA/B,uDAAjC;AACA,UAAKI,WAAL,GAAmB,MAAKA,WAAL,CAAiBJ,IAAjB,uDAAnB;AACA,UAAKK,wBAAL,GAAgC,MAAKA,wBAAL,CAA8BL,IAA9B,uDAAhC;AACA,UAAKM,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BN,IAA7B,uDAA/B;AAEA,UAAKO,eAAL,GAAuB,MAAKA,eAAL,CAAqBP,IAArB,uDAAvB;AACA,UAAKQ,YAAL,GAAoB,MAAKA,YAAL,CAAkBR,IAAlB,uDAApB;AAEA,UAAK3B,eAAL,GAAuB,MAAKA,eAAL,CAAqB2B,IAArB,uDAAvB;AAzCe;AA0ChB;;;;wCAEkB;AACjB,UAAMS,MAAM,GAAGC,OAAO,CAACC,GAAR,CAAYC,wBAA3B;AACA,WAAKrC,QAAL,CAAc;AAACiB,QAAAA,OAAO,EAAEiB;AAAV,OAAd;AACD;;;mCAEa;AACZ,UAAMI,UAAU,GAAG,KAAKlC,KAAL,CAAWW,OAAX,CAAmBwB,WAAnB,KAAmC,EAAnC,GACf,CAAC,OAAO,KAAKnC,KAAL,CAAWW,OAAX,CAAmByB,QAAnB,KAAgC,CAAvC,CAAD,EAA4CC,KAA5C,CAAkD,CAAC,CAAnD,CADe,GAC0C,EAD1C,GACgD,CAAC,MAAM,KAAKrC,KAAL,CAAWW,OAAX,CAAmB2B,OAAnB,EAAP,EAAqCD,KAArC,CAA2C,CAAC,CAA5C,CADnE;AAIA,WAAK5C,KAAL,CAAW8C,OAAX,CAAmBC,IAAnB,CAAwB;AACtBC,QAAAA,QAAQ,EAAE,SADY;AAEtBzC,QAAAA,KAAK,EAAE;AAACE,UAAAA,aAAa,EAAE,KAAKF,KAAL,CAAWE,aAA3B;AACCgC,UAAAA,UAAU,EAAEA,UADb;AAEC7B,UAAAA,WAAW,EAAE,KAAKL,KAAL,CAAWK,WAFzB;AAGCG,UAAAA,OAAO,EAAE,KAAKR,KAAL,CAAWQ,OAHrB;AAICE,UAAAA,SAAS,EAAE,KAAKV,KAAL,CAAWU;AAJvB;AAFe,OAAxB;AAQD;;;gCAQWgC,O,EAAQ;AAClB,UAAMC,UAAU,GAAGZ,OAAO,CAACC,GAAR,CAAYY,yBAA/B;;AACA,UAAGF,OAAO,KAAK,EAAf,EAAkB;AAChB,YAAMG,IAAI,GAAG;AACXC,UAAAA,MAAM,EAAE;AACNC,YAAAA,MAAM,EAAEJ,UADF;AAENK,YAAAA,IAAI,EAAEN;AAFA;AADG,SAAb;AAMA,YAAIO,IAAI,GAAG,IAAX;AAEA5E,QAAAA,KAAK,CAAC6E,GAAN,CAAU,4DAAV,EAAwEL,IAAxE,EACCM,IADD,CACM,UAAUC,QAAV,EAAoB;AACxBH,UAAAA,IAAI,CAACrD,QAAL,CAAc;AAACO,YAAAA,QAAQ,EAAEiD,QAAQ,CAACC;AAApB,WAAd;AACD,SAHD,EAICC,KAJD,CAIO,UAAUC,KAAV,EAAiB;AACtBzD,UAAAA,OAAO,CAACC,GAAR,CAAYwD,KAAZ;AACD,SAND;AAOD;AACF;;;oCAEeC,C,EAAE;AAChB,WAAK5D,QAAL,CAAc;AAACc,QAAAA,SAAS,EAAE8C,CAAC,CAACC,MAAF,CAASC;AAArB,OAAd;AACD;;;6CAGwBF,C,EAAE;AACzB,WAAK5D,QAAL,CAAc;AAACa,QAAAA,UAAU,EAAE+C,CAAC,CAACC,MAAF,CAASC;AAAtB,OAAd;AACA,UAAMC,aAAa,GAAG,KAAK3D,KAAL,CAAWM,WAAX,CAAuBsD,MAAvB,CAA8B,UAAApD,OAAO;AAAA,eACzDA,OAAO,CAACqD,IAAR,CAAaC,WAAb,GAA2BC,QAA3B,CAAoCP,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeI,WAAf,EAApC,CADyD;AAAA,OAArC,CAAtB;AAEA,UAAME,oBAAoB,GAAGL,aAAa,CAACtB,KAAd,CAAoB,CAApB,EAAuB,EAAvB,CAA7B;AAEA,WAAKzC,QAAL,CAAc;AAACW,QAAAA,mBAAmB,EAAEyD;AAAtB,OAAd;AACD;;;wCAEmBC,I,EAAK;AACvB,WAAKrE,QAAL,CAAc;AAACa,QAAAA,UAAU,EAAEwD,IAAI,CAACJ;AAAlB,OAAd;AACA,WAAKjE,QAAL,CAAc;AAACY,QAAAA,OAAO,EAAEyD,IAAI,CAACC;AAAf,OAAd;AACA,WAAKtE,QAAL,CAAc;AAACW,QAAAA,mBAAmB,EAAE;AAAtB,OAAd;AAED;;;+CAG0BiD,C,EAAE;AAC3B,WAAK5D,QAAL,CAAc;AAACK,QAAAA,gBAAgB,EAAEuD,CAAC,CAACC,MAAF,CAASC;AAA5B,OAAd;AACA,WAAKjC,WAAL,CAAiB+B,CAAC,CAACC,MAAF,CAASC,KAA1B;AACD;;;8CAEyBO,I,EAAK;AAC7B,WAAKrE,QAAL,CAAc;AAACK,QAAAA,gBAAgB,EAAEgE,IAAI,CAACE;AAAxB,OAAd;AACA,WAAKvE,QAAL,CAAc;AAACM,QAAAA,aAAa,EAAE+D,IAAI,CAACP;AAArB,OAAd;AACA,WAAK9D,QAAL,CAAc;AAACO,QAAAA,QAAQ,EAAE;AAAX,OAAd;AACD;;;6CAEwBqD,C,EAAE;AACzB,WAAK5D,QAAL,CAAc;AAACQ,QAAAA,cAAc,EAAEoD,CAAC,CAACC,MAAF,CAASC;AAA1B,OAAd;AACA,WAAKjC,WAAL,CAAiB+B,CAAC,CAACC,MAAF,CAASC,KAA1B;AACD;;;4CAEuBO,I,EAAK;AAC3B,WAAKrE,QAAL,CAAc;AAACQ,QAAAA,cAAc,EAAE6D,IAAI,CAACE;AAAtB,OAAd;AACA,WAAKvE,QAAL,CAAc;AAACS,QAAAA,WAAW,EAAE4D,IAAI,CAACP;AAAnB,OAAd;AACA,WAAK9D,QAAL,CAAc;AAACO,QAAAA,QAAQ,EAAE;AAAX,OAAd;AACD;;;6BAGO;AAAA;;AACN,aACE;AAAK,QAAA,EAAE,EAAC,WAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAIM;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAEE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,KAAKH,KAAL,CAAWa,OAAX,KAAuB,EAAvB,IAA8B,oBAAC,aAAD;AAC3B,QAAA,YAAY,EAAE,iDAAiD,KAAKb,KAAL,CAAWa,OAA5D,GAAsE,4CADzD;AAE3B,QAAA,UAAU,EAAG,KAAKnB,eAFS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAD/B,CAFF,CAJN,EAcI;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACC,MAAM,KAAKM,KAAL,CAAWW,OAAX,CAAmByD,kBAAnB,CAAsC,OAAtC,EAA+CpF,WAA/C,CADP,CADF,EAKE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACE,oBAAC,YAAD;AACE,QAAA,YAAY,EAAE,sBAACiF,IAAD;AAAA,iBAAUA,IAAI,CAACP,KAAf;AAAA,SADhB;AAEE,QAAA,KAAK,EAAE,KAAK1D,KAAL,CAAWG,QAFpB;AAGE,QAAA,UAAU,EAAE,oBAAC8D,IAAD,EAAOI,aAAP;AAAA,iBACV;AAAK,YAAA,KAAK,EAAE;AAAEC,cAAAA,UAAU,EAAED,aAAa,GAAG,WAAH,GAAiB;AAA5C,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACGJ,IAAI,CAACE,KADR,CADU;AAAA,SAHd;AAQE,QAAA,KAAK,EAAE,KAAKnE,KAAL,CAAWC,gBARpB;AASE,QAAA,QAAQ,EAAE,kBAAAuD,CAAC;AAAA,iBAAI,MAAI,CAACjC,0BAAL,CAAgCiC,CAAhC,CAAJ;AAAA,SATb;AAUE,QAAA,QAAQ,EAAE,kBAACE,KAAD,EAAQO,IAAR;AAAA,iBAAiB,MAAI,CAACzC,yBAAL,CAA+ByC,IAA/B,CAAjB;AAAA,SAVZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADJ,EAeI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BACE,oBAAC,YAAD;AACE,QAAA,YAAY,EAAE,sBAACA,IAAD;AAAA,iBAAUA,IAAI,CAACP,KAAf;AAAA,SADhB;AAEE,QAAA,KAAK,EAAE,KAAK1D,KAAL,CAAWG,QAFpB;AAGE,QAAA,UAAU,EAAE,oBAAC8D,IAAD,EAAOI,aAAP;AAAA,iBACV;AAAK,YAAA,KAAK,EAAE;AAAEC,cAAAA,UAAU,EAAED,aAAa,GAAG,WAAH,GAAiB;AAA5C,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACGJ,IAAI,CAACE,KADR,CADU;AAAA,SAHd;AAQE,QAAA,KAAK,EAAE,KAAKnE,KAAL,CAAWI,cARpB;AASE,QAAA,QAAQ,EAAE,kBAAAoD,CAAC;AAAA,iBAAI,MAAI,CAAC9B,wBAAL,CAA8B8B,CAA9B,CAAJ;AAAA,SATb;AAUE,QAAA,QAAQ,EAAE,kBAACE,KAAD,EAAQO,IAAR;AAAA,iBAAiB,MAAI,CAACtC,uBAAL,CAA6BsC,IAA7B,CAAjB;AAAA,SAVZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAfJ,CALF,EAmCE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACE,oBAAC,YAAD;AACE,QAAA,YAAY,EAAE,sBAACA,IAAD;AAAA,iBAAUA,IAAI,CAACC,SAAf;AAAA,SADhB;AAEE,QAAA,KAAK,EAAE,KAAKlE,KAAL,CAAWO,mBAFpB;AAGE,QAAA,UAAU,EAAE,oBAAC0D,IAAD,EAAOI,aAAP;AAAA,iBACV;AAAK,YAAA,KAAK,EAAE;AAAEC,cAAAA,UAAU,EAAED,aAAa,GAAG,WAAH,GAAiB;AAA5C,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACGJ,IAAI,CAACJ,IADR,CADU;AAAA,SAHd;AAQE,QAAA,KAAK,EAAE,KAAK7D,KAAL,CAAWS,UARpB;AASE,QAAA,QAAQ,EAAE,kBAAA+C,CAAC;AAAA,iBAAI,MAAI,CAACpC,wBAAL,CAA8BoC,CAA9B,CAAJ;AAAA,SATb;AAUE,QAAA,QAAQ,EAAE,kBAACE,KAAD,EAAQO,IAAR;AAAA,iBAAiB,MAAI,CAAC3C,mBAAL,CAAyB2C,IAAzB,CAAjB;AAAA,SAVZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADJ,EAeI;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAA0C;AAAO,QAAA,KAAK,EAAE,KAAKjE,KAAL,CAAWU,SAAzB;AAAoC,QAAA,IAAI,EAAC,MAAzC;AAAgD,QAAA,QAAQ,EAAE,KAAKkB,eAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA1C,CAfJ,CAnCF,EAoDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKC,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAAL,CApDF,CAdJ,CADF;AAuED;;;;EAjNiC3D,S;;SAAjBsB,Q","sourcesContent":["/* global google */\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport { Button } from 'react-bootstrap';\r\nimport Autocomplete from 'react-autocomplete'\r\nimport axios from 'axios'\r\nimport { withScriptjs, GoogleMap, withGoogleMap, DirectionsRenderer} from 'react-google-maps';\r\n\r\nimport { compose, withProps, lifecycle} from 'recompose'\r\n\r\nimport AddressSearch from './AddressSearch.js'\r\nimport Header from './Header.js'\r\nimport './MainPage.css'\r\nimport airlines from './Airlines.js'\r\n\r\n\r\nvar dateOptions = {hour: 'numeric', minute: 'numeric', timeZoneName: 'short', weekday: 'long', year: 'numeric', month: 'short', day: 'numeric'};\r\n\r\n\r\nexport default class MainPage extends Component {  \r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      departureSiteBox: \"\",\r\n      departureSite: \"\",\r\n      siteList : [],\r\n      arrivalSiteBox: \"\",\r\n      arrivalSite: \"\",\r\n      airlineList : airlines.airlines,\r\n      filteredAirlineList: [],\r\n      airline: \"\",\r\n      airlineBox: \"\",\r\n      flightNum: \"\",\r\n      curDate: new Date(),\r\n      startAddress: \"\",\r\n\r\n      mapsAPI: \"\", \r\n      \r\n      \r\n\r\n      testOrigin: \"Eaton Centre\",\r\n      testDest: \"YYZ\",\r\n      travelMode: \"DRIVING\",\r\n      drivingOptions: {\r\n        departureTime: new Date(),\r\n        trafficModel: 'optimistic'\r\n      },\r\n      };\r\n\r\n      this.handleAirlineFieldChange = this.handleAirlineFieldChange.bind(this)\r\n      this.handleAirlineSelect = this.handleAirlineSelect.bind(this)\r\n\r\n      this.handleDepartureFieldChange = this.handleDepartureFieldChange.bind(this)\r\n      this.handleDepartureSiteSelect = this.handleDepartureSiteSelect.bind(this)\r\n      this.searchSites = this.searchSites.bind(this)\r\n      this.handleArrivalFieldChange = this.handleArrivalFieldChange.bind(this)\r\n      this.handleArrivalSiteSelect = this.handleArrivalSiteSelect.bind(this)\r\n\r\n      this.updateFlightNum = this.updateFlightNum.bind(this)\r\n      this.handleSubmit = this.handleSubmit.bind(this)\r\n\r\n      this.getStartAddress = this.getStartAddress.bind(this)\r\n    }  \r\n\r\n    componentDidMount(){\r\n      const apiKey = process.env.REACT_APP_GOOGLE_API_KEY;\r\n      this.setState({mapsAPI: apiKey})\r\n    }\r\n\r\n    handleSubmit(){\r\n      const flightDate = this.state.curDate.getFullYear() + \"\"\r\n       + ((\"0\" + (this.state.curDate.getMonth() + 1)).slice(-2)) + \"\" + ((\"0\" + this.state.curDate.getDate()).slice(-2)) \r\n      \r\n\r\n      this.props.history.push({\r\n        pathname: '/result', \r\n        state: {departureSite: this.state.departureSite, \r\n                flightDate: flightDate, \r\n                arrivalSite: this.state.arrivalSite,\r\n                airline: this.state.airline, \r\n                flightNum: this.state.flightNum}\r\n        });\r\n    }\r\n\r\n    getStartAddress = (address) => {\r\n      this.setState({startAddress: address})\r\n      console.log(this.state);\r\n    }\r\n\r\n\r\n    searchSites(keyword){\r\n      const airportKey = process.env.REACT_APP_AIRPORT_API_KEY;\r\n      if(keyword !== \"\"){\r\n        const init = {\r\n          params: {\r\n            apikey: airportKey,\r\n            term: keyword\r\n          }\r\n        }\r\n        var self = this;\r\n\r\n        axios.get(\"https://api.sandbox.amadeus.com/v1.2/airports/autocomplete\", init)\r\n        .then(function (response) {\r\n          self.setState({siteList: response.data});\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n      } \r\n    }\r\n\r\n    updateFlightNum(e){\r\n      this.setState({flightNum: e.target.value})\r\n    }\r\n\r\n\r\n    handleAirlineFieldChange(e){\r\n      this.setState({airlineBox: e.target.value})\r\n      const filteredArray = this.state.airlineList.filter(airline => \r\n        airline.name.toUpperCase().includes(e.target.value.toUpperCase()))\r\n      const limitedFilteredArray = filteredArray.slice(0, 20);\r\n      \r\n      this.setState({filteredAirlineList: limitedFilteredArray})\r\n    }\r\n\r\n    handleAirlineSelect(item){\r\n      this.setState({airlineBox: item.name})\r\n      this.setState({airline: item.iata_code})\r\n      this.setState({filteredAirlineList: []})\r\n\r\n    }\r\n\r\n\r\n    handleDepartureFieldChange(e){\r\n      this.setState({departureSiteBox: e.target.value})\r\n      this.searchSites(e.target.value)  \r\n    }\r\n\r\n    handleDepartureSiteSelect(item){\r\n      this.setState({departureSiteBox: item.label})\r\n      this.setState({departureSite: item.value})\r\n      this.setState({siteList: []})\r\n    }\r\n\r\n    handleArrivalFieldChange(e){\r\n      this.setState({arrivalSiteBox: e.target.value})\r\n      this.searchSites(e.target.value)  \r\n    }\r\n\r\n    handleArrivalSiteSelect(item){\r\n      this.setState({arrivalSiteBox: item.label})\r\n      this.setState({arrivalSite: item.value})\r\n      this.setState({siteList: []})\r\n    }\r\n\r\n\r\n    render(){\r\n      return(\r\n        <div id=\"main-page\">\r\n            <Header>              \r\n            </Header>\r\n\r\n              <div className=\"home-address\">\r\n                Home Address:\r\n                <div className=\"address-autofill\">\r\n                {this.state.mapsAPI !== \"\" &&  <AddressSearch\r\n                    googleMapURL={\"https://maps.googleapis.com/maps/api/js?key=\" + this.state.mapsAPI + \"&v=3.exp&libraries=geometry,drawing,places\"}\r\n                    setAddress ={this.getStartAddress}\r\n                    /> \r\n                }\r\n                </div>\r\n              </div>\r\n            <div className=\"form-container\">\r\n              <div className=\"cur-date\"> Travel Date:\r\n              {\" \" + this.state.curDate.toLocaleDateString(\"en-US\", dateOptions)}\r\n              </div>\r\n              \r\n              <div className=\"airports\"> \r\n                  <div className=\"airport\">Departure Airport:  \r\n                    <Autocomplete\r\n                      getItemValue={(item) => item.value}\r\n                      items={this.state.siteList}\r\n                      renderItem={(item, isHighlighted) =>\r\n                        <div style={{ background: isHighlighted ? 'lightgray' : 'white' }}>\r\n                          {item.label}\r\n                        </div>\r\n                      }\r\n                      value={this.state.departureSiteBox}\r\n                      onChange={e => this.handleDepartureFieldChange(e)}\r\n                      onSelect={(value, item) => this.handleDepartureSiteSelect(item)}\r\n                      /> \r\n                  </div>\r\n                  <div className=\"airport\">Arrival Airport:\r\n                    <Autocomplete\r\n                      getItemValue={(item) => item.value}\r\n                      items={this.state.siteList}\r\n                      renderItem={(item, isHighlighted) =>\r\n                        <div style={{ background: isHighlighted ? 'lightgray' : 'white' }}>\r\n                          {item.label}\r\n                        </div>\r\n                      }\r\n                      value={this.state.arrivalSiteBox}\r\n                      onChange={e => this.handleArrivalFieldChange(e)}\r\n                      onSelect={(value, item) => this.handleArrivalSiteSelect(item)}\r\n                    /> \r\n                  </div>\r\n              </div>\r\n              <div className=\"flight-info\"> \r\n                  <div className=\"flight-details\">Airline: \r\n                    <Autocomplete\r\n                      getItemValue={(item) => item.iata_code}\r\n                      items={this.state.filteredAirlineList}\r\n                      renderItem={(item, isHighlighted) =>\r\n                        <div style={{ background: isHighlighted ? 'lightgray' : 'white' }}>\r\n                          {item.name}\r\n                        </div>\r\n                      }\r\n                      value={this.state.airlineBox}\r\n                      onChange={e => this.handleAirlineFieldChange(e)}\r\n                      onSelect={(value, item) => this.handleAirlineSelect(item)}\r\n                    /> \r\n                  </div>\r\n                  <div className=\"flight-details\">Flight #: <input value={this.state.flightNum} type=\"text\" onChange={this.updateFlightNum}/></div>\r\n              </div>\r\n              <div><Button onClick={this.handleSubmit}>Calculate Travel Times</Button></div>\r\n            </div>\r\n        </div>\r\n      );\r\n    }\r\n  }"]},"metadata":{},"sourceType":"module"}