{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\zhang\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\departure-planner\\\\react-backend\\\\client\\\\src\\\\components\\\\MainPage.js\";\nimport React, { Component } from 'react';\nimport { Button } from 'react-bootstrap';\nimport Autocomplete from 'react-autocomplete';\nimport axios from 'axios';\nimport AddressSearch from './AddressSearch.js';\nimport Header from './Header.js';\nimport './Style.css';\nimport airlines from './Airlines.js';\nvar dateOptions = {\n  hour: 'numeric',\n  minute: 'numeric',\n  timeZoneName: 'short',\n  weekday: 'long',\n  year: 'numeric',\n  month: 'short',\n  day: 'numeric'\n};\n\nvar MainPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MainPage, _Component);\n\n  function MainPage(props) {\n    var _this;\n\n    _classCallCheck(this, MainPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MainPage).call(this, props));\n\n    _this.getStartAddress = function (address) {\n      _this.setState({\n        startAddress: address\n      });\n    };\n\n    _this.state = {\n      departureSiteBox: \"\",\n      departureSite: \"\",\n      siteList: [],\n      arrivalSiteBox: \"\",\n      arrivalSite: \"\",\n      airlineList: airlines.airlines,\n      filteredAirlineList: [],\n      airline: \"\",\n      airlineBox: \"\",\n      flightNum: \"\",\n      curDate: new Date(),\n      startAddress: \"\",\n      mapsAPI: \"\"\n    };\n    _this.handleAirlineFieldChange = _this.handleAirlineFieldChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleAirlineSelect = _this.handleAirlineSelect.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDepartureFieldChange = _this.handleDepartureFieldChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDepartureSiteSelect = _this.handleDepartureSiteSelect.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.searchSites = _this.searchSites.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleArrivalFieldChange = _this.handleArrivalFieldChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleArrivalSiteSelect = _this.handleArrivalSiteSelect.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateFlightNum = _this.updateFlightNum.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getStartAddress = _this.getStartAddress.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MainPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var apiKey = process.env.REACT_APP_GOOGLE_API_KEY;\n      this.setState({\n        mapsAPI: apiKey\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit() {\n      var flightDate = this.state.curDate.getFullYear() + \"\" + (\"0\" + (this.state.curDate.getMonth() + 1)).slice(-2) + \"\" + (\"0\" + this.state.curDate.getDate()).slice(-2);\n      this.props.history.push({\n        pathname: '/result',\n        state: {\n          departureSite: this.state.departureSite,\n          flightDate: flightDate,\n          arrivalSite: this.state.arrivalSite,\n          airline: this.state.airline,\n          flightNum: this.state.flightNum,\n          homeAddress: this.state.startAddress\n        }\n      });\n    }\n  }, {\n    key: \"searchSites\",\n    value: function searchSites(keyword) {\n      var airportKey = process.env.REACT_APP_AIRPORT_API_KEY;\n\n      if (keyword !== \"\") {\n        var init = {\n          params: {\n            apikey: airportKey,\n            term: keyword\n          }\n        };\n        var self = this;\n        axios.get(\"https://api.sandbox.amadeus.com/v1.2/airports/autocomplete\", init).then(function (response) {\n          self.setState({\n            siteList: response.data\n          });\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    }\n  }, {\n    key: \"updateFlightNum\",\n    value: function updateFlightNum(e) {\n      this.setState({\n        flightNum: e.target.value\n      });\n    }\n  }, {\n    key: \"handleAirlineFieldChange\",\n    value: function handleAirlineFieldChange(e) {\n      this.setState({\n        airlineBox: e.target.value\n      });\n      var filteredArray = this.state.airlineList.filter(function (airline) {\n        return airline.name.toUpperCase().includes(e.target.value.toUpperCase());\n      });\n      var limitedFilteredArray = filteredArray.slice(0, 20);\n      this.setState({\n        filteredAirlineList: limitedFilteredArray\n      });\n    }\n  }, {\n    key: \"handleAirlineSelect\",\n    value: function handleAirlineSelect(item) {\n      this.setState({\n        airlineBox: item.name\n      });\n      this.setState({\n        airline: item.iata_code\n      });\n      this.setState({\n        filteredAirlineList: []\n      });\n    }\n  }, {\n    key: \"handleDepartureFieldChange\",\n    value: function handleDepartureFieldChange(e) {\n      this.setState({\n        departureSiteBox: e.target.value\n      });\n      this.searchSites(e.target.value);\n    }\n  }, {\n    key: \"handleDepartureSiteSelect\",\n    value: function handleDepartureSiteSelect(item) {\n      this.setState({\n        departureSiteBox: item.label\n      });\n      this.setState({\n        departureSite: item.value\n      });\n      this.setState({\n        siteList: []\n      });\n    }\n  }, {\n    key: \"handleArrivalFieldChange\",\n    value: function handleArrivalFieldChange(e) {\n      this.setState({\n        arrivalSiteBox: e.target.value\n      });\n      this.searchSites(e.target.value);\n    }\n  }, {\n    key: \"handleArrivalSiteSelect\",\n    value: function handleArrivalSiteSelect(item) {\n      this.setState({\n        arrivalSiteBox: item.label\n      });\n      this.setState({\n        arrivalSite: item.value\n      });\n      this.setState({\n        siteList: []\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        id: \"main-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"header-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"DeparturePlanner\"), React.createElement(\"p\", {\n        className: \"header-subtext\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"Never miss a flight again\")), React.createElement(\"div\", {\n        className: \"body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"home-address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Home Address:\", React.createElement(\"div\", {\n        className: \"address-autofill\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, this.state.mapsAPI !== \"\" && React.createElement(AddressSearch, {\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=\" + this.state.mapsAPI + \"&v=3.exp&libraries=geometry,drawing,places\",\n        setAddress: this.getStartAddress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"cur-date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \" Travel Date:\", \" \" + this.state.curDate.toLocaleDateString(\"en-US\", dateOptions)), React.createElement(\"div\", {\n        className: \"airports\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"airport\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Departure Airport:\", React.createElement(Autocomplete, {\n        getItemValue: function getItemValue(item) {\n          return item.value;\n        },\n        items: this.state.siteList,\n        renderItem: function renderItem(item, isHighlighted) {\n          return React.createElement(\"div\", {\n            style: {\n              background: isHighlighted ? 'lightgray' : 'white'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 166\n            },\n            __self: this\n          }, item.label);\n        },\n        value: this.state.departureSiteBox,\n        onChange: function onChange(e) {\n          return _this2.handleDepartureFieldChange(e);\n        },\n        onSelect: function onSelect(value, item) {\n          return _this2.handleDepartureSiteSelect(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"airport\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"Arrival Airport:\", React.createElement(Autocomplete, {\n        getItemValue: function getItemValue(item) {\n          return item.value;\n        },\n        items: this.state.siteList,\n        renderItem: function renderItem(item, isHighlighted) {\n          return React.createElement(\"div\", {\n            style: {\n              background: isHighlighted ? 'lightgray' : 'white'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 180\n            },\n            __self: this\n          }, item.label);\n        },\n        value: this.state.arrivalSiteBox,\n        onChange: function onChange(e) {\n          return _this2.handleArrivalFieldChange(e);\n        },\n        onSelect: function onSelect(value, item) {\n          return _this2.handleArrivalSiteSelect(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"flight-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flight-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Airline:\", React.createElement(Autocomplete, {\n        getItemValue: function getItemValue(item) {\n          return item.iata_code;\n        },\n        items: this.state.filteredAirlineList,\n        renderItem: function renderItem(item, isHighlighted) {\n          return React.createElement(\"div\", {\n            style: {\n              background: isHighlighted ? 'lightgray' : 'white'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196\n            },\n            __self: this\n          }, item.name);\n        },\n        value: this.state.airlineBox,\n        onChange: function onChange(e) {\n          return _this2.handleAirlineFieldChange(e);\n        },\n        onSelect: function onSelect(value, item) {\n          return _this2.handleAirlineSelect(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"flight-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"Flight #: \", React.createElement(\"input\", {\n        value: this.state.flightNum,\n        type: \"text\",\n        onChange: this.updateFlightNum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Calculate Travel Times\")))));\n    }\n  }]);\n\n  return MainPage;\n}(Component);\n\nexport { MainPage as default };","map":{"version":3,"sources":["C:\\Users\\zhang\\OneDrive\\Documents\\Personal Projects\\departure-planner\\react-backend\\client\\src\\components\\MainPage.js"],"names":["React","Component","Button","Autocomplete","axios","AddressSearch","Header","airlines","dateOptions","hour","minute","timeZoneName","weekday","year","month","day","MainPage","props","getStartAddress","address","setState","startAddress","state","departureSiteBox","departureSite","siteList","arrivalSiteBox","arrivalSite","airlineList","filteredAirlineList","airline","airlineBox","flightNum","curDate","Date","mapsAPI","handleAirlineFieldChange","bind","handleAirlineSelect","handleDepartureFieldChange","handleDepartureSiteSelect","searchSites","handleArrivalFieldChange","handleArrivalSiteSelect","updateFlightNum","handleSubmit","apiKey","process","env","REACT_APP_GOOGLE_API_KEY","flightDate","getFullYear","getMonth","slice","getDate","history","push","pathname","homeAddress","keyword","airportKey","REACT_APP_AIRPORT_API_KEY","init","params","apikey","term","self","get","then","response","data","catch","error","console","log","e","target","value","filteredArray","filter","name","toUpperCase","includes","limitedFilteredArray","item","iata_code","label","toLocaleDateString","isHighlighted","background"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport { Button } from 'react-bootstrap';\r\nimport Autocomplete from 'react-autocomplete'\r\nimport axios from 'axios'\r\n\r\nimport AddressSearch from './AddressSearch.js'\r\nimport Header from './Header.js'\r\nimport './Style.css'\r\nimport airlines from './Airlines.js'\r\n\r\n\r\nvar dateOptions = {hour: 'numeric', minute: 'numeric', timeZoneName: 'short', weekday: 'long', year: 'numeric', month: 'short', day: 'numeric'};\r\n\r\n\r\nexport default class MainPage extends Component {  \r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      departureSiteBox: \"\",\r\n      departureSite: \"\",\r\n      siteList : [],\r\n      arrivalSiteBox: \"\",\r\n      arrivalSite: \"\",\r\n      airlineList : airlines.airlines,\r\n      filteredAirlineList: [],\r\n      airline: \"\",\r\n      airlineBox: \"\",\r\n      flightNum: \"\",\r\n      curDate: new Date(),\r\n      startAddress: \"\",\r\n      mapsAPI: \"\"\r\n      };\r\n\r\n      this.handleAirlineFieldChange = this.handleAirlineFieldChange.bind(this)\r\n      this.handleAirlineSelect = this.handleAirlineSelect.bind(this)\r\n      this.handleDepartureFieldChange = this.handleDepartureFieldChange.bind(this)\r\n      this.handleDepartureSiteSelect = this.handleDepartureSiteSelect.bind(this)\r\n      this.searchSites = this.searchSites.bind(this)\r\n      this.handleArrivalFieldChange = this.handleArrivalFieldChange.bind(this)\r\n      this.handleArrivalSiteSelect = this.handleArrivalSiteSelect.bind(this)\r\n      this.updateFlightNum = this.updateFlightNum.bind(this)\r\n      this.handleSubmit = this.handleSubmit.bind(this)\r\n      this.getStartAddress = this.getStartAddress.bind(this)\r\n    }  \r\n\r\n    componentDidMount(){\r\n      const apiKey = process.env.REACT_APP_GOOGLE_API_KEY;\r\n      this.setState({mapsAPI: apiKey})\r\n    }\r\n\r\n    handleSubmit(){\r\n      const flightDate = this.state.curDate.getFullYear() + \"\"\r\n       + ((\"0\" + (this.state.curDate.getMonth() + 1)).slice(-2)) + \"\" + ((\"0\" + this.state.curDate.getDate()).slice(-2)) \r\n      \r\n\r\n      this.props.history.push({\r\n        pathname: '/result', \r\n        state: {departureSite: this.state.departureSite, \r\n                flightDate: flightDate, \r\n                arrivalSite: this.state.arrivalSite,\r\n                airline: this.state.airline, \r\n                flightNum: this.state.flightNum,\r\n                homeAddress: this.state.startAddress}\r\n        });\r\n    }\r\n\r\n    getStartAddress = (address) => {\r\n      this.setState({startAddress: address})\r\n    }\r\n\r\n\r\n    searchSites(keyword){\r\n      const airportKey = process.env.REACT_APP_AIRPORT_API_KEY;\r\n      if(keyword !== \"\"){\r\n        const init = {\r\n          params: {\r\n            apikey: airportKey,\r\n            term: keyword\r\n          }\r\n        }\r\n        var self = this;\r\n        axios.get(\"https://api.sandbox.amadeus.com/v1.2/airports/autocomplete\", init)\r\n        .then(function (response) {\r\n          self.setState({siteList: response.data});\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n      } \r\n    }\r\n\r\n    updateFlightNum(e){\r\n      this.setState({flightNum: e.target.value})\r\n    }\r\n\r\n    handleAirlineFieldChange(e){\r\n      this.setState({airlineBox: e.target.value})\r\n      const filteredArray = this.state.airlineList.filter(airline => \r\n        airline.name.toUpperCase().includes(e.target.value.toUpperCase()))\r\n      const limitedFilteredArray = filteredArray.slice(0, 20);\r\n      \r\n      this.setState({filteredAirlineList: limitedFilteredArray})\r\n    }\r\n\r\n    handleAirlineSelect(item){\r\n      this.setState({airlineBox: item.name})\r\n      this.setState({airline: item.iata_code})\r\n      this.setState({filteredAirlineList: []})\r\n\r\n    }\r\n\r\n    handleDepartureFieldChange(e){\r\n      this.setState({departureSiteBox: e.target.value})\r\n      this.searchSites(e.target.value)  \r\n    }\r\n\r\n    handleDepartureSiteSelect(item){\r\n      this.setState({departureSiteBox: item.label})\r\n      this.setState({departureSite: item.value})\r\n      this.setState({siteList: []})\r\n    }\r\n\r\n    handleArrivalFieldChange(e){\r\n      this.setState({arrivalSiteBox: e.target.value})\r\n      this.searchSites(e.target.value)  \r\n    }\r\n\r\n    handleArrivalSiteSelect(item){\r\n      this.setState({arrivalSiteBox: item.label})\r\n      this.setState({arrivalSite: item.value})\r\n      this.setState({siteList: []})\r\n    }\r\n\r\n\r\n    render(){\r\n      return(\r\n        <div id=\"main-page\">\r\n            <div className=\"header\">\r\n              <p className=\"header-title\">DeparturePlanner</p>\r\n              <p className=\"header-subtext\">Never miss a flight again</p>\r\n            </div>\r\n\r\n            <div className=\"body\">\r\n              <div className=\"home-address\">\r\n                Home Address:\r\n                <div className=\"address-autofill\">\r\n                {this.state.mapsAPI !== \"\" &&  <AddressSearch\r\n                    googleMapURL={\"https://maps.googleapis.com/maps/api/js?key=\" + this.state.mapsAPI + \"&v=3.exp&libraries=geometry,drawing,places\"}\r\n                    setAddress ={this.getStartAddress}\r\n                    /> \r\n                }\r\n                </div>\r\n              </div>\r\n            <div className=\"form-container\">\r\n              <div className=\"cur-date\"> Travel Date:\r\n              {\" \" + this.state.curDate.toLocaleDateString(\"en-US\", dateOptions)}\r\n              </div>\r\n              \r\n              <div className=\"airports\"> \r\n                  <div className=\"airport\">Departure Airport:  \r\n                    <Autocomplete\r\n                      getItemValue={(item) => item.value}\r\n                      items={this.state.siteList}\r\n                      renderItem={(item, isHighlighted) =>\r\n                        <div style={{ background: isHighlighted ? 'lightgray' : 'white' }}>\r\n                          {item.label}\r\n                        </div>\r\n                      }\r\n                      value={this.state.departureSiteBox}\r\n                      onChange={e => this.handleDepartureFieldChange(e)}\r\n                      onSelect={(value, item) => this.handleDepartureSiteSelect(item)}\r\n                      /> \r\n                  </div>\r\n                  <div className=\"airport\">Arrival Airport:\r\n                    <Autocomplete\r\n                      getItemValue={(item) => item.value}\r\n                      items={this.state.siteList}\r\n                      renderItem={(item, isHighlighted) =>\r\n                        <div style={{ background: isHighlighted ? 'lightgray' : 'white' }}>\r\n                          {item.label}\r\n                        </div>\r\n                      }\r\n                      value={this.state.arrivalSiteBox}\r\n                      onChange={e => this.handleArrivalFieldChange(e)}\r\n                      onSelect={(value, item) => this.handleArrivalSiteSelect(item)}\r\n                    /> \r\n                  </div>\r\n              </div>\r\n              <div className=\"flight-info\"> \r\n                  <div className=\"flight-details\">Airline: \r\n                    <Autocomplete\r\n                      getItemValue={(item) => item.iata_code}\r\n                      items={this.state.filteredAirlineList}\r\n                      renderItem={(item, isHighlighted) =>\r\n                        <div style={{ background: isHighlighted ? 'lightgray' : 'white' }}>\r\n                          {item.name}\r\n                        </div>\r\n                      }\r\n                      value={this.state.airlineBox}\r\n                      onChange={e => this.handleAirlineFieldChange(e)}\r\n                      onSelect={(value, item) => this.handleAirlineSelect(item)}\r\n                    /> \r\n                  </div>\r\n                  <div className=\"flight-details\">Flight #: <input value={this.state.flightNum} type=\"text\" onChange={this.updateFlightNum}/></div>\r\n              </div>\r\n              <div>\r\n                <Button onClick={this.handleSubmit}>Calculate Travel Times</Button></div>\r\n              </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }"]},"metadata":{},"sourceType":"module"}